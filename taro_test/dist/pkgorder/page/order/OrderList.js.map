{"version":3,"file":"pkgorder/page/order/OrderList.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://i_bizz_client/./src/pkgorder/page/order/OrderList.tsx?3aab","webpack://i_bizz_client/._src_pkgorder_page_order_OrderList.tsx"],"sourcesContent":["import _objectSpread from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nvar _dec, _class;\nimport React from 'react';\nimport { observer, inject } from 'mobx-react';\nimport JsUtil from 'tsx/common/JsUtil';\nimport cnst from 'tsx/common/Constant';\nimport statuses from 'tsx/common/Statuses';\nimport URI from 'tsx/common/URI';\nimport HeadLayout from 'tsx/layout/HeadLayout';\nimport RowLayout from 'tsx/layout/RowLayout';\nimport BrView from 'tsx/view/BrView';\nimport TextLabel from 'tsx/view/TextLabel';\nimport GeneralInput from 'tsx/form/GeneralInput';\nimport CascadeBox from 'tsx/form/CascadeBox';\nimport IntegerInput from 'tsx/form/IntegerInput';\nimport SelectInput from 'tsx/form/SelectInput';\nimport TaroModal from 'tsx/component/TaroModal';\nimport { jsxs as _jsxs, jsx as _jsx } from \"react/jsx-runtime\";\nvar OrderList = (_dec = inject('store'), _dec(_class = observer(_class = /*#__PURE__*/function (_React$Component) {\n  function OrderList(props) {\n    var _this;\n    _classCallCheck(this, OrderList);\n    _this = _callSuper(this, OrderList, [props]);\n    _defineProperty(_this, \"labels0\", {\n      returnAddressId: '收货地址',\n      remark: '备注'\n    });\n    _defineProperty(_this, \"labels1\", _objectSpread({}, _this.labels0));\n    _defineProperty(_this, \"labels\", _objectSpread({}, _this.labels1));\n    _defineProperty(_this, \"checkedAllList\", void 0);\n    _defineProperty(_this, \"topNavBarTitle\", void 0);\n    _defineProperty(_this, \"shipType\", 1);\n    _defineProperty(_this, \"currUserId\", JsUtil.getAppItem('currUserId'));\n    _defineProperty(_this, \"currOrgId\", JsUtil.getAppItem(\"currOrgId\"));\n    _defineProperty(_this, \"currOrgType\", JsUtil.getAppItem(\"currOrgType\"));\n    _defineProperty(_this, \"searchOrder\", function (_ref) {\n      var _ref$pageNo = _ref.pageNo,\n        pageNo = _ref$pageNo === void 0 ? 1 : _ref$pageNo,\n        _ref$commodityName = _ref.commodityName,\n        commodityName = _ref$commodityName === void 0 ? _this.params.commodityName : _ref$commodityName,\n        _ref$supplierName = _ref.supplierName,\n        supplierName = _ref$supplierName === void 0 ? _this.params.supplierName : _ref$supplierName,\n        _ref$payType = _ref.payType,\n        payType = _ref$payType === void 0 ? _this.params.payType : _ref$payType,\n        _ref$tradeType = _ref.tradeType,\n        tradeType = _ref$tradeType === void 0 ? _this.params.tradeType : _ref$tradeType,\n        _ref$status = _ref.status,\n        status = _ref$status === void 0 ? _this.params.status : _ref$status,\n        _ref$createTime = _ref.createTime,\n        createTime = _ref$createTime === void 0 ? _this.params.createTime : _ref$createTime,\n        _ref$createTime2 = _ref.createTime2,\n        createTime2 = _ref$createTime2 === void 0 ? _this.params.createTime2 : _ref$createTime2;\n      var operatorId = _this.params.operatorId;\n      var supplierId = _this.params.supplierId;\n      var menuParam = _this.params.menuParam;\n      if (!operatorId) {\n        //operatorId = cnst.ID_NO;\n      }\n      var params = {\n        operatorId: operatorId,\n        supplierId: supplierId,\n        pageNo: pageNo,\n        commodityName: commodityName,\n        supplierName: supplierName,\n        payType: payType,\n        tradeType: tradeType,\n        status: status,\n        createTime: JsUtil.appendTime(createTime),\n        createTime2: JsUtil.appendTime(createTime2)\n      };\n      if (menuParam == cnst.MENU_MB_G_B2C || menuParam == cnst.MENU_MB_R_B2C) {\n        params.payerId = _this.currUserId;\n        params.supplierId = '';\n      }\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result)) {\n          var records = result.body;\n          var checkedList = [];\n          records.map(function (item, idx) {\n            checkedList.push(item.id);\n          });\n          _this.checkedAllList = [].concat(checkedList);\n          _this.setState({\n            entities: records,\n            totalRecords: result.totalRecords\n          });\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result);\n      };\n      var uri = '';\n      if (_this.params.mallType == cnst.MALL_TYPE_G_B2B) {\n        uri = \"/od/pub/b2b/global/ord/\";\n        _this.topNavBarTitle = '全国b2b订单列表';\n      } else if (_this.params.mallType == cnst.MALL_TYPE_G_B2C) {\n        uri = \"/od/pub/b2c/global/ord/\";\n        _this.topNavBarTitle = '全国b2c订单列表';\n      } else if (_this.params.mallType == cnst.MALL_TYPE_R_B2B) {\n        uri = \"/od/pub/b2b/region/ord/\";\n        _this.topNavBarTitle = '地方b2b订单列表';\n      } else if (_this.params.mallType == cnst.MALL_TYPE_R_B2C) {\n        uri = \"/od/pub/b2c/region/ord/\";\n        _this.topNavBarTitle = '地方b2c订单列表';\n      }\n      JsUtil.asyncHttpPost(_this, uri + \"search\", JSON.stringify(params), succ, err);\n    });\n    _defineProperty(_this, \"detailFunc\", function (event) {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n      } else if (checkedList.length > 1) {\n        JsUtil.showMsgBox(_this, '只能选择一条记录');\n      } else {\n        JsUtil.go2Page(URI.ORDER_ORDER_ENTITY + '?mallType=' + _this.params.mallType + '&mode=' + cnst.SHOW_MODE_VIEW + '&id=' + checkedList[0]);\n      }\n    });\n    _defineProperty(_this, \"cancel\", function () {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n        return;\n      }\n      var mallType = _this.params.mallType;\n      var uri = \"/od/pub/b2b/global/ord/cancel/update\";\n      if (mallType == cnst.MALL_TYPE_G_B2C) uri = \"/od/pub/b2c/global/ord/cancel/update\";\n      if (mallType == cnst.MALL_TYPE_R_B2B) uri = \"/od/pub/b2b/region/ord/cancel/update\";\n      if (mallType == cnst.MALL_TYPE_R_B2C) uri = \"/od/pub/b2c/region/ord/cancel/update\";\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result, true)) {\n          _this.setState({\n            'checkedList': []\n          });\n          _this.searchOrder({});\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result, true);\n      };\n      JsUtil.asyncHttpPost(_this, uri, JSON.stringify(checkedList), succ, err);\n    });\n    _defineProperty(_this, \"deliver\", function () {\n      var _this$state = _this.state,\n        checkedList = _this$state.checkedList,\n        entities = _this$state.entities;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n        return;\n      }\n      var immediatelyTrueCount = 0;\n      var immediatelyFalseCount = 0;\n      var returnAddressId = '';\n      var receiptAddressId = '';\n      var selectedOrders = [];\n      var invalidStatus = false;\n      var addrDiffReceive = false;\n      var addrDiffReturn = false;\n      var invalidRole = false;\n      var menuParam = _this.params.menuParam;\n      entities.map(function (item) {\n        if (checkedList.includes(item.id)) {\n          if (item.immediately === true) immediatelyTrueCount++;else immediatelyFalseCount++;\n          if (menuParam == cnst.MENU_MB_G_B2C || menuParam == cnst.MENU_MB_R_B2C || menuParam == cnst.MENU_OP_G_B2B || menuParam == cnst.MENU_SS_R_B2B) {\n            if (!(item.status == statuses.ord.STATUS_WAIT_SHIP || item.status == statuses.ord.STATUS_WAIT_RETURN_DELIVER)) {\n              invalidStatus = true;\n            }\n            if (!item.returnAddressId || item.returnAddressId != returnAddressId && returnAddressId != '') {\n              addrDiffReturn = true;\n            }\n            _this.shipType = 3;\n          } else if (menuParam == cnst.MENU_SP_G_B2C || menuParam == cnst.MENU_SP_R_B2C || menuParam == cnst.MENU_SP_G_B2B || menuParam == cnst.MENU_SP_R_B2B || menuParam == cnst.MENU_SS_R_B2C) {\n            if (!(item.status == statuses.ord.STATUS_WAIT_SHIP || item.status == statuses.ord.STATUS_WAIT_RETURN_DELIVER)) {\n              invalidStatus = true;\n            }\n            if (!item.receiptAddressId || item.receiptAddressId != receiptAddressId && receiptAddressId != '') {\n              addrDiffReceive = true;\n            }\n          } else {\n            invalidRole = true;\n          }\n          selectedOrders.push(item);\n          returnAddressId = item.returnAddressId;\n          receiptAddressId = item.receiptAddressId;\n        }\n      });\n      if (immediatelyTrueCount > 0 && immediatelyFalseCount > 0) {\n        JsUtil.showMsgBox(_this, '即时配送和普通配送不能一起发货');\n        return;\n      }\n      if (invalidRole == true) {\n        JsUtil.showMsgBox(_this, '只有供应商能发货或买家发退货');\n        return;\n      }\n      if (invalidStatus == true) {\n        JsUtil.showMsgBox(_this, '订单不是待发货状态');\n        return;\n      }\n      if (addrDiffReceive == true) {\n        JsUtil.showMsgBox(_this, '收货地址不能是多个地址');\n        return;\n      }\n      if (addrDiffReturn == true) {\n        JsUtil.showMsgBox(_this, '订单不处于待发退货状态或退货地址不能是多个地址');\n        return;\n      }\n      var orderStore = _this.props.store.orderStore;\n      orderStore.orderIds = checkedList;\n      var order = selectedOrders[0];\n      if (order.deliveryType == cnst.DELIVERY_TYPE_EXPRESS_CHANGE && _this.currOrgType != cnst.ORG_TYPE_SS) {\n        JsUtil.showMsgBox(_this, '只能由服务站转发');\n        return;\n      }\n      JsUtil.go2Page(URI.ORDER_OTHERS_SHIP_ENTITY + '?menuParam=' + menuParam + '&paymentId=' + order.id + '&shipType=' + _this.shipType + '&supplierId=' + order.supplierId + '&receiptAddressId=' + order.receiptAddressId + '&returnAddressId=' + order.returnAddressId + '&deliveryType=' + order.deliveryType + '&payerId=' + order.payerId + '&orderIdsStr=' + checkedList);\n    });\n    _defineProperty(_this, \"receive\", function () {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n        return;\n      }\n      var mallType = _this.params.mallType;\n      var uri = \"/od/pub/b2b/global/ord/receipt/update\";\n      if (mallType == cnst.MALL_TYPE_G_B2C) uri = \"/od/pub/b2c/global/ord/receipt/update\";\n      if (mallType == cnst.MALL_TYPE_R_B2B) uri = \"/od/pub/b2b/region/ord/receipt/update\";\n      if (mallType == cnst.MALL_TYPE_R_B2C) uri = \"/od/pub/b2c/region/ord/receipt/update\";\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result, true)) {\n          _this.setState({\n            'checkedList': []\n          });\n          _this.searchOrder({});\n        }\n      };\n      var err = function err(result) {\n        JsUtil.showMsgBox(_this, \"请求失败:\" + result.message);\n      };\n      JsUtil.asyncHttpPost(_this, uri, JSON.stringify(checkedList), succ, err);\n    });\n    _defineProperty(_this, \"go2Pay\", function (event) {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n      } else {\n        var entities = _this.state.entities;\n        var _checkedList = _this.state.checkedList;\n        var payments = [];\n        var lastPaymentId = 0;\n        var _loop = function _loop(i) {\n          var order = entities.find(function (item) {\n            return item.id == _checkedList[i];\n          });\n          var paymentId = order.payment.id;\n          var onlineAmount = order.onlineAmount;\n          if (paymentId == lastPaymentId) {\n            var payment = payments.find(function (item) {\n              return item.id == paymentId;\n            });\n            payment.onlineAmount += onlineAmount;\n          } else {\n            payments.push({\n              id: paymentId,\n              onlineAmount: onlineAmount\n            });\n          }\n          lastPaymentId = paymentId;\n        };\n        for (var i = 0; i < _checkedList.length; i++) {\n          _loop(i);\n        }\n        console.log('payments:', payments);\n        var paymentStore = _this.paymentStore;\n        paymentStore.setPayments(payments);\n        JsUtil.go2Page(URI.PAYMENT_PAY);\n        //JsUtil.go2Page(URI.PAYMENT_PAY + '?paymentId=' + orderItem.paymentId + '&orderType=' + orderType + '&onlineAmount='+orderItem.onlineAmount);\n      }\n    });\n    _defineProperty(_this, \"evaluate\", function (event) {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n      } else if (checkedList.length > 1) {\n        JsUtil.showMsgBox(_this, '只能选择一条记录');\n      } else {\n        JsUtil.go2Page(URI.ORDER_ORDER_SECOND + '?mallType=' + _this.params.mallType + '&id=' + checkedList[0]);\n      }\n    });\n    _defineProperty(_this, \"applyReturn\", function (event) {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, \"请至少选中一项\");\n        return;\n      } else if (checkedList.length > 1) {\n        JsUtil.showMsgBox(_this, '只能选择一条记录');\n        return;\n      } else {\n        var entities = _this.state.entities;\n        var _checkedList2 = _this.state.checkedList;\n        var finalQty = entities.find(function (item) {\n          return item.id == _checkedList2[0];\n        }).finalQty;\n        _this.setState({\n          popupReturn: true,\n          finalQty: finalQty\n        });\n      }\n    });\n    _defineProperty(_this, \"returnQtyFn\", function (name, value) {\n      var max = _this.state.finalQty;\n      var quantity = value;\n      if (quantity < 1) quantity = 1;else if (quantity - max > 0) quantity = max;\n      _this.setState({\n        returnQty: quantity\n      });\n    });\n    _defineProperty(_this, \"applyReturnConfirm\", function (event) {\n      var uri = \"/od/pub/b2b/global/ord/return/update\";\n      if (_this.params.mallType == cnst.MALL_TYPE_G_B2C) uri = \"/od/pub/b2c/global/ord/return/update\";\n      if (_this.params.mallType == cnst.MALL_TYPE_R_B2B) uri = \"/od/pub/b2b/region/ord/return/update\";\n      if (_this.params.mallType == cnst.MALL_TYPE_R_B2C) uri = \"/od/pub/b2c/region/ord/return/update\";\n      var order = {\n        id: _this.state.checkedList[0],\n        returnQty: _this.state.returnQty,\n        remark: _this.state.remark\n      };\n      var param = [];\n      param.push(order);\n      JsUtil.asyncHttpPost(_this, uri, JSON.stringify(param), function (result) {\n        if (JsUtil.handleMessage(_this, result, true)) {\n          _this.setState({\n            'checkedList': []\n          });\n          _this.searchOrder({});\n        }\n      }, function (err) {\n        return JsUtil.showMsgBox(_this, err.message);\n      });\n      _this.setState({\n        remark: '',\n        popupReturn: false\n      });\n    });\n    _defineProperty(_this, \"approveReturnPre\", function () {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, \"请至少选中一项\");\n      } else {\n        _this.initReturnAddrs();\n        _this.setState({\n          popupApproveReturn: true\n        });\n      }\n    });\n    _defineProperty(_this, \"approveReturnYes\", function () {\n      _this.approveReturn(true);\n    });\n    _defineProperty(_this, \"approveReturnNo\", function () {\n      _this.approveReturn(false);\n    });\n    _defineProperty(_this, \"approveReturn\", function (pass) {\n      var returnAddressId = _this.state.returnAddressId;\n      if (!returnAddressId) {\n        JsUtil.showMsgBox(_this, '请选择收货地址');\n        return;\n      }\n      var remark = _this.state.remark;\n      if (!pass && !remark) {\n        JsUtil.showMsgBox(_this, '请填写备注');\n        return;\n      }\n      var checkedList = _this.state.checkedList;\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result, true)) {\n          _this.setState({\n            'checkedList': []\n          });\n          _this.searchOrder({});\n        }\n      };\n      var err = function err(result) {\n        JsUtil.showMsgBox(_this, '请求失败:' + result.message);\n      };\n      var ids = '';\n      checkedList.map(function (id) {\n        ids = ids + 'ids=' + id + '&';\n      });\n      var uri = \"/od/pub/b2b/global/ord/return/approve/update\";\n      if (_this.params.mallType == cnst.MALL_TYPE_G_B2C) uri = \"/od/pub/b2c/global/ord/return/approve/update\";\n      if (_this.params.mallType == cnst.MALL_TYPE_R_B2B) uri = \"/od/pub/b2b/region/ord/return/approve/update\";\n      if (_this.params.mallType == cnst.MALL_TYPE_R_B2C) uri = \"/od/pub/b2c/region/ord/return/approve/update\";\n      JsUtil.asyncHttpPost(_this, uri + '?' + ids + 'pass=' + pass + '&remark=' + remark + '&returnAddressId=' + returnAddressId, null, succ, err);\n      _this.setState({\n        remark: '',\n        popupApproveReturn: false\n      });\n    });\n    _defineProperty(_this, \"receiveReturnPre\", function () {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, \"请至少选中一项\");\n      } else {\n        _this.setState({\n          popupReceiveReturn: true\n        });\n      }\n    });\n    _defineProperty(_this, \"receiveReturnYes\", function () {\n      _this.receiveReturn(true);\n    });\n    _defineProperty(_this, \"receiveReturnNo\", function () {\n      _this.receiveReturn(false);\n    });\n    _defineProperty(_this, \"receiveReturn\", function (pass) {\n      var remark = _this.state.remark;\n      if (!pass && !remark) {\n        JsUtil.showMsgBox(_this, '请填写备注');\n        return;\n      }\n      var checkedList = _this.state.checkedList;\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result, true)) {\n          _this.setState({\n            'checkedList': []\n          });\n          _this.searchOrder({});\n        }\n      };\n      var err = function err(result) {\n        JsUtil.showMsgBox(_this, '请求失败:' + result.message);\n      };\n      var ids = '';\n      checkedList.map(function (id) {\n        ids = ids + 'ids=' + id + '&';\n      });\n      var uri = \"/od/pub/b2b/global/ord/receive/return/approve/update\";\n      if (_this.params.mallType == cnst.MALL_TYPE_G_B2C) uri = \"/od/pub/b2c/global/ord/receive/return/approve/update\";else if (_this.params.mallType == cnst.MALL_TYPE_R_B2B) uri = \"/od/pub/b2b/region/ord/receive/return/approve/update\";else if (_this.params.mallType == cnst.MALL_TYPE_R_B2C) uri = \"/od/pub/b2c/region/ord/receive/return/approve/update\";\n      JsUtil.asyncHttpPost(_this, uri + '?' + ids + 'pass=' + pass + '&remark=' + remark, null, succ, err, cnst.REQUEST_TYPE_WWW);\n      _this.setState({\n        remark: '',\n        popupReceiveReturn: false\n      });\n    });\n    _defineProperty(_this, \"settlePre\", function () {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, \"请至少选中一项\");\n      } else {\n        _this.setState({\n          popupSettle: true\n        });\n      }\n    });\n    _defineProperty(_this, \"settleYes\", function () {\n      var remark = _this.state.remark;\n      if (!remark) {\n        JsUtil.showMsgBox(_this, '请填写备注');\n        return;\n      }\n      var checkedList = _this.state.checkedList;\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result, true)) {\n          _this.setState({\n            'checkedList': []\n          });\n          _this.searchOrder({});\n        }\n      };\n      var err = function err(result) {\n        JsUtil.showMsgBox(_this, '请求失败:' + result.message);\n      };\n      var ids = '';\n      checkedList.map(function (id) {\n        ids = ids + 'ids=' + id + '&';\n      });\n      var uri = \"/od/pub/b2b/global/ord/settl/update\";\n      if (_this.params.mallType == cnst.MALL_TYPE_G_B2C) uri = \"/od/pub/b2c/global/ord/settl/update\";\n      if (_this.params.mallType == cnst.MALL_TYPE_R_B2B) uri = \"/od/pub/b2b/region/ord/settl/update\";\n      if (_this.params.mallType == cnst.MALL_TYPE_R_B2C) uri = \"/od/pub/b2c/global/ord/settl/update\";\n      JsUtil.asyncHttpPost(_this, uri, ids + 'remark=' + remark, succ, err);\n      _this.setState({\n        remark: '',\n        popupSettle: false\n      });\n    });\n    _defineProperty(_this, \"getListOptions\", function (records) {\n      var options = [];\n      records.map(function (item, indx) {\n        var desc = /*#__PURE__*/_jsxs(RowLayout, {\n          justifyContent: 'space-between',\n          width: cnst.NUM_WIDTH_MAIN + 3,\n          children: [/*#__PURE__*/_jsxs(TextLabel, {\n            color: \"red\",\n            children: [JsUtil.currFormat(item.price), \"x\", item.finalQty]\n          }), /*#__PURE__*/_jsx(TextLabel, {\n            children: item.supplierName\n          }), /*#__PURE__*/_jsx(TextLabel, {\n            children: statuses.ordLabel(item.status)\n          })]\n        });\n        options.push({\n          value: item.id,\n          label: /*#__PURE__*/_jsx(TextLabel, {\n            children: item.commodityName\n          }),\n          desc: desc\n        });\n      });\n      return options;\n    });\n    _defineProperty(_this, \"onCheckBoxesAllChanged\", function (name, selectedValues) {\n      if (selectedValues.length == 0) {\n        _this.setState(_defineProperty({}, name, []));\n      } else {\n        _this.setState(_defineProperty({}, name, _this.checkedAllList));\n      }\n    });\n    _defineProperty(_this, \"onCascadeBoxChanged\", function (name, selectedValues) {\n      _this.setState(_defineProperty({}, name, selectedValues));\n    });\n    _defineProperty(_this, \"onInputChanged\", function (name, value) {\n      _this.setState(_defineProperty({}, name, value));\n    });\n    _defineProperty(_this, \"changeHandler\", function (name) {\n      return function (item) {\n        var value = item.id;\n        _this.setState(_defineProperty({}, name, value));\n      };\n    });\n    _defineProperty(_this, \"onClose\", function (name) {\n      _this.setState(_defineProperty({}, name, false));\n    });\n    _defineProperty(_this, \"onConfirm\", function () {\n      JsUtil.closeMsgBox(_this);\n    });\n    _this.params = JsUtil.getUrlParams(_this);\n    _this.paymentStore = _this.props.store.paymentStore;\n    _this.state = {\n      entities: [],\n      returnAddressId: '',\n      returnAddressOptions: [],\n      commodityName: '',\n      commodityNo: '',\n      supplierName: '',\n      remark: '',\n      createTime: ' ',\n      createTime2: ' ',\n      page: 1,\n      totalRecords: 0,\n      checkedList: [],\n      finalQty: 0,\n      returnQty: 0,\n      popupReturn: false,\n      popupApproveReturn: false,\n      popupReceiveReturn: false,\n      popupSettle: false,\n      errors: {\n        remark: false\n      }\n    };\n    return _this;\n  }\n  _inherits(OrderList, _React$Component);\n  return _createClass(OrderList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.searchOrder({});\n    }\n  }, {\n    key: \"initReturnAddrs\",\n    value: function initReturnAddrs() {\n      var _this2 = this;\n      var orgId = this.currOrgId;\n      if (!orgId) {\n        return;\n      }\n      var param = {\n        subjectId: orgId\n      };\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this2, result)) _this2.setState({\n          returnAddressOptions: result.body\n        });\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this2, result);\n      };\n      JsUtil.asyncHttpPost(this, \"/lg/pub/receipt/address/organization/search\", JSON.stringify(param), succ, err);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var _this$state2 = this.state,\n        entities = _this$state2.entities,\n        totalRecords = _this$state2.totalRecords,\n        checkedList = _this$state2.checkedList,\n        returnQty = _this$state2.returnQty,\n        returnAddressOptions = _this$state2.returnAddressOptions,\n        returnAddressId = _this$state2.returnAddressId;\n      var menuParam = this.params.menuParam;\n      var show = {\n        pay: true,\n        cancel: false,\n        deliver: false,\n        receive: false,\n        evaluate: false,\n        applyReturn: false,\n        approveReturn: false,\n        buyerDeliver: false,\n        receiveReturn: false\n      };\n      if (menuParam == cnst.MENU_SP_G_B2B || menuParam == cnst.MENU_SP_G_B2C || menuParam == cnst.MENU_SP_R_B2B || menuParam == cnst.MENU_SP_R_B2C) {\n        show.deliver = true;\n      }\n      if (menuParam == cnst.MENU_MB_G_B2C || menuParam == cnst.MENU_MB_R_B2C) {\n        show.cancel = true;\n      }\n      if (menuParam == cnst.MENU_MB_G_B2C || menuParam == cnst.MENU_MB_R_B2C || menuParam == cnst.MENU_OP_G_B2B || menuParam == cnst.MENU_SS_R_B2C) {\n        show.deliver = true;\n      }\n      if (menuParam == cnst.MENU_MB_G_B2C || menuParam == cnst.MENU_MB_R_B2C || menuParam == cnst.MENU_OP_G_B2B || menuParam == cnst.MENU_SS_R_B2B) {\n        show.receive = true;\n        show.evaluate = false;\n      }\n      if (menuParam == cnst.MENU_MB_G_B2C || menuParam == cnst.MENU_MB_R_B2C || menuParam == cnst.MENU_OP_G_B2B || menuParam == cnst.MENU_SS_R_B2B) {\n        show.applyReturn = true;\n      }\n      if (menuParam == cnst.MENU_SP_G_B2B || menuParam == cnst.MENU_SP_G_B2C || menuParam == cnst.MENU_SP_R_B2B || menuParam == cnst.MENU_SP_R_B2C || menuParam == cnst.MENU_HQ_G_B2C || menuParam == cnst.MENU_HQ_R_B2C || menuParam == cnst.MENU_OP_R_B2C) {\n        show.approveReturn = true;\n        show.receiveReturn = true;\n      }\n      var options = this.getListOptions(entities);\n      var commandLabel0 = show.pay ? '支付' : '';\n      var commandLabel3 = show.cancel ? '取消' : '';\n      var commandLabel4 = show.deliver ? '发货' : '';\n      var commandLabel5 = show.receive ? '收货' : '';\n      var commandLabel6 = show.evaluate ? '评价' : '';\n      var commandLabel7 = show.applyReturn ? '退货' : '';\n      var commandLabel8 = show.approveReturn ? '退审' : '';\n      var commandLabel9 = show.receiveReturn ? '收退货' : '';\n      var commandLabel10 = show.settle ? '结算' : '';\n      var labelKey = 'detailAddress';\n      var valueKey = 'id';\n      return /*#__PURE__*/_jsxs(HeadLayout, {\n        that: this,\n        topNavBarTitle: this.topNavBarTitle,\n        bottomLabel0: commandLabel0,\n        bottomFunc0: this.go2Pay,\n        bottomLabel1: '全选',\n        bottomFunc1: this.onCheckBoxesAllChanged,\n        bottomLabel2: '明细',\n        bottomFunc2: this.detailFunc,\n        bottomLabel3: commandLabel3,\n        bottomFunc3: this.cancel,\n        bottomLabel4: commandLabel4,\n        bottomFunc4: this.deliver,\n        bottomLabel5: commandLabel5,\n        bottomFunc5: this.receive,\n        bottomLabel6: commandLabel6,\n        bottomFunc6: this.evaluate,\n        bottomLabel7: commandLabel7,\n        bottomFunc7: this.applyReturn,\n        bottomLabel8: commandLabel8,\n        bottomFunc8: this.approveReturnPre,\n        bottomLabel9: commandLabel9,\n        bottomFunc9: this.receiveReturnPre,\n        bottomLabel10: commandLabel10,\n        bottomFunc10: this.settlePre,\n        children: [/*#__PURE__*/_jsx(CascadeBox, {\n          name: \"checkedList\",\n          options: options,\n          value: checkedList,\n          onChange: this.onCascadeBoxChanged,\n          width: cnst.NUM_WIDTH_MAIN,\n          BrHeight: 1\n        }), /*#__PURE__*/_jsxs(TaroModal, {\n          isOpened: this.state.popupReturn,\n          onClose: function onClose(e) {\n            return _this3.onClose('popupReturn', e);\n          },\n          onConfirm: this.applyReturnConfirm,\n          confirmText: \"\\u786E\\u5B9A\",\n          children: [/*#__PURE__*/_jsxs(RowLayout, {\n            justifyContent: \"flex-start\",\n            children: [\"\\u9000\\u8D27\\u6570\\u91CF: \\xA0\\xA0\", /*#__PURE__*/_jsx(IntegerInput, {\n              name: 'quantity',\n              min: 1,\n              max: 9999,\n              value: returnQty,\n              onChange: this.returnQtyFn\n            })]\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: cnst.NUM_HEIGHT_LINE,\n            backgroundColor: cnst.COLOR_BACKGROUND_WHITE\n          }), /*#__PURE__*/_jsx(GeneralInput, {\n            name: 'remark',\n            label: this.labels.remark,\n            type: 'text',\n            value: this.state.remark,\n            error: this.state.errors.remark,\n            onChange: this.onInputChanged\n          })]\n        }), /*#__PURE__*/_jsxs(TaroModal, {\n          isOpened: this.state.popupApproveReturn,\n          onClose: function onClose(e) {\n            return _this3.onClose('popupApproveReturn', e);\n          },\n          onConfirm: this.approveReturnYes,\n          onCancel: this.approveReturnNo,\n          confirmText: \"\\u901A\\u8FC7\",\n          cancelText: \"\\u62D2\\u7EDD\",\n          children: [/*#__PURE__*/_jsx(SelectInput, {\n            options: returnAddressOptions,\n            labelKey: labelKey,\n            valueKey: valueKey,\n            value: returnAddressId,\n            onChange: this.changeHandler('returnAddressId'),\n            label: this.labels.returnAddressId\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: cnst.NUM_HEIGHT_LINE,\n            backgroundColor: cnst.COLOR_BACKGROUND_WHITE\n          }), /*#__PURE__*/_jsx(GeneralInput, {\n            name: 'remark',\n            label: this.labels.remark,\n            type: 'text',\n            value: this.state.remark,\n            error: this.state.errors.remark,\n            onChange: this.onInputChanged\n          })]\n        }), /*#__PURE__*/_jsx(TaroModal, {\n          isOpened: this.state.popupReceiveReturn,\n          onClose: function onClose(e) {\n            return _this3.onClose('popupReceiveReturn', e);\n          },\n          onConfirm: this.receiveReturnYes,\n          onCancel: this.receiveReturnNo,\n          confirmText: \"\\u901A\\u8FC7\",\n          cancelText: \"\\u62D2\\u7EDD\",\n          children: /*#__PURE__*/_jsx(GeneralInput, {\n            name: 'remark',\n            label: this.labels.remark,\n            type: 'text',\n            value: this.state.remark,\n            error: this.state.errors.remark,\n            onChange: this.onInputChanged\n          })\n        }), /*#__PURE__*/_jsx(TaroModal, {\n          isOpened: this.state.popupSettle,\n          onClose: function onClose(e) {\n            return _this3.onClose('popupSettle', e);\n          },\n          onConfirm: this.settleYes,\n          confirmText: \"\\u901A\\u8FC7\",\n          children: /*#__PURE__*/_jsx(GeneralInput, {\n            name: 'remark',\n            label: this.labels.remark,\n            type: 'text',\n            value: this.state.remark,\n            error: this.state.errors.remark,\n            onChange: this.onInputChanged\n          })\n        })]\n      });\n    }\n  }]);\n}(React.Component)) || _class) || _class);\nexport default OrderList;","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pkgorder/page/order/OrderList!./OrderList.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pkgorder/page/order/OrderList', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}