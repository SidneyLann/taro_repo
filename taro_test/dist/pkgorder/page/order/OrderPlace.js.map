{"version":3,"file":"pkgorder/page/order/OrderPlace.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACllBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://i_bizz_client/./src/pkgorder/page/order/OrderPlace.tsx?2af7","webpack://i_bizz_client/._src_pkgorder_page_order_OrderPlace.tsx"],"sourcesContent":["import _objectSpread from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nvar _dec, _class;\nimport React from 'react';\nimport { observer, inject } from 'mobx-react';\nimport JsUtil from 'tsx/common/JsUtil';\nimport cnst from 'tsx/common/Constant';\nimport URI from 'tsx/common/URI';\nimport HeadLayout from 'tsx/layout/HeadLayout';\nimport RowLayout from 'tsx/layout/RowLayout';\nimport ColumnLayout from 'tsx/layout/ColumnLayout';\nimport Level2View from 'tsx/view/Level2View';\nimport BrView from 'tsx/view/BrView';\nimport TextLabel from 'tsx/view/TextLabel';\nimport GeneralButton from 'tsx/form/GeneralButton';\nimport GeneralInput from 'tsx/form/GeneralInput';\nimport SelectInput from 'tsx/form/SelectInput';\nimport LegenImage from 'tsx/view/LegenImage';\nimport CascadeBox from 'tsx/form/CascadeBox';\nimport IntegerInput from 'tsx/form/IntegerInput';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar OrderPlace = (_dec = inject('store'), _dec(_class = observer(_class = /*#__PURE__*/function (_React$Component) {\n  function OrderPlace(props) {\n    var _this;\n    _classCallCheck(this, OrderPlace);\n    _this = _callSuper(this, OrderPlace, [props]);\n    _defineProperty(_this, \"labels0\", {\n      receiptAddr: '收货地址',\n      pickupAddr: '自提地址',\n      platformAmount: '平台金额',\n      remark: '备注'\n    });\n    _defineProperty(_this, \"labels\", _objectSpread({}, _this.labels0));\n    _defineProperty(_this, \"count\", 0);\n    _defineProperty(_this, \"setDefaultReceiptAddrress\", function (mallType, AddrId, self) {\n      if (!mallType) return;\n      var uri = '/mb/pub/receipt/member/update';\n      var subjectId = 'receiptMemId';\n      if (mallType == cnst.MALL_TYPE_G_B2B || mallType == cnst.MALL_TYPE_R_B2B) {\n        uri = '/mb/pub/receipt/org/update';\n        subjectId = 'receiptOrgId';\n      } else {\n        if (self) {\n          AddrId = 'o' + AddrId;\n        }\n      }\n      JsUtil.setAppItem(subjectId, AddrId);\n      JsUtil.asyncHttpPost(_this, uri, 'addressId=' + AddrId, null, null, cnst.REQUEST_TYPE_WWW);\n    });\n    _defineProperty(_this, \"onSelectedReceiptAddr\", function (name) {\n      return function (item) {\n        _this.setState(_defineProperty({}, name, item), function () {\n          _this.initGoodsInfo();\n        });\n      };\n    });\n    _defineProperty(_this, \"onSelectedPickupAddr\", function (name) {\n      return function (item) {\n        var mallType = _this.orderStore.mallType;\n        var selectedAddr = item;\n        if (mallType == cnst.MALL_TYPE_G_B2C || mallType == cnst.MALL_TYPE_R_B2C) {\n          if (!selectedAddr.id.startsWith('o')) selectedAddr.id = 'o' + selectedAddr.id;\n        }\n        _this.setState({\n          isShowPickupAddrOptions: false,\n          selectedAddr: selectedAddr\n        }, function () {\n          _this.initGoodsInfo();\n        });\n      };\n    });\n    _defineProperty(_this, \"handleBalancePayAmount\", function (name, value) {\n      var _this$state$orderInfo = _this.state.orderInfo,\n        orderInfo = _this$state$orderInfo === void 0 ? {} : _this$state$orderInfo;\n      var limitAmount = _this.state.totalAmount + _this.state.totalFreight;\n      var balanceAmount = orderInfo.balanceAmount;\n      if (value.indexOf('.') != -1 && value.indexOf('.') < value.length - 3) {\n        value = value.substring(0, value.indexOf('.') + 3);\n      }\n      var balancePayAmount = parseFloat(value) || 0;\n      if (value.substring(value.length - 1) == '.' && value.indexOf('.') == value.length - 1) {\n        balancePayAmount += '.';\n      }\n      if (balancePayAmount > balanceAmount) {\n        balancePayAmount = balanceAmount;\n      }\n      if (balancePayAmount > limitAmount) {\n        balancePayAmount = limitAmount;\n      }\n      //balancePayAmount*=100/100;\n      _this.setState({\n        balancePayAmount: balancePayAmount\n      });\n    });\n    _defineProperty(_this, \"createOrder\", function () {\n      if (_this.count > 0) {\n        return;\n      }\n      _this.count = 1;\n      var _this$orderStore = _this.orderStore,\n        b2cGlobalQty = _this$orderStore.b2cGlobalQty,\n        b2cGlobalSpecIds = _this$orderStore.b2cGlobalSpecIds,\n        b2cRegionQty = _this$orderStore.b2cRegionQty,\n        b2cRegionSpecIds = _this$orderStore.b2cRegionSpecIds,\n        b2bGlobalQty = _this$orderStore.b2bGlobalQty,\n        b2bGlobalSpecIds = _this$orderStore.b2bGlobalSpecIds,\n        b2bRegionQty = _this$orderStore.b2bRegionQty,\n        b2bRegionSpecIds = _this$orderStore.b2bRegionSpecIds,\n        mallType = _this$orderStore.mallType,\n        buyImmediately = _this$orderStore.buyImmediately;\n      var _this$state = _this.state,\n        totalVoucherAmount = _this$state.totalVoucherAmount,\n        balancePayAmount = _this$state.balancePayAmount,\n        _this$state$selectedA = _this$state.selectedAddr,\n        selectedAddr = _this$state$selectedA === void 0 ? {} : _this$state$selectedA,\n        remark = _this$state.remark;\n      var params = {\n        depositAmount: balancePayAmount,\n        receiptAddressId: selectedAddr.id,\n        receiptRegionId: selectedAddr.regionId,\n        nickLoginName: JsUtil.getAppItem('currUserName'),\n        buyImmediately: buyImmediately,\n        remark: remark\n      };\n      var uri = '/od/pub/b2c/common/ord/create';\n      if (mallType == cnst.MALL_TYPE_G_B2C) {\n        params.b2cGlobalSpecIds = b2cGlobalSpecIds;\n        params.b2cGlobalQty = b2cGlobalQty;\n      } else if (mallType == cnst.MALL_TYPE_R_B2C) {\n        params.b2cRegionSpecIds = b2cRegionSpecIds;\n        params.b2cRegionQty = b2cRegionQty;\n      } else if (mallType == cnst.MALL_TYPE_G_B2B) {\n        uri = '/od/pub/b2b/common/ord/create';\n        params.b2bGlobalSpecIds = b2bGlobalSpecIds;\n        params.b2bGlobalQty = b2bGlobalQty;\n      } else if (mallType == cnst.MALL_TYPE_R_B2B) {\n        uri = '/od/pub/b2b/common/ord/create';\n        params.b2bRegionSpecIds = b2bRegionSpecIds;\n        params.b2bRegionQty = b2bRegionQty;\n      }\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result)) {\n          var onlineAmount = _this.state.totalAmount + _this.state.totalFreight - totalVoucherAmount - balancePayAmount - _this.state.totalOfflAmount;\n          if (onlineAmount < cnst.FLOAT_EXTREMELY_SMALL) {\n            JsUtil.showMsgBox(_this, '下单成功');\n            return;\n          }\n          var payments = result.body;\n          var paymentStore = _this.paymentStore;\n          paymentStore.setPayments(payments);\n          JsUtil.go2Page(URI.PAYMENT_PAY);\n        } else {\n          _this.count = 0;\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result, true, true);\n        _this.count = 0;\n      };\n      JsUtil.asyncHttpPost(_this, uri, JSON.stringify(params), succ, err);\n    });\n    _defineProperty(_this, \"getCommodityOptions\", function (data) {\n      var options = [];\n      var checkedList = [];\n      if (!data || data.length == 0) return {\n        options: options,\n        checkedList: checkedList\n      };\n      data.map(function (item, indx) {\n        var options2 = [];\n        var checkedList2 = [];\n        item.preOrderCommodityDtos.map(function (item2, indx2) {\n          options2.push({\n            value: item2.specId,\n            label: /*#__PURE__*/_jsxs(RowLayout, {\n              children: [/*#__PURE__*/_jsx(LegenImage, {\n                src: JsUtil.IMAGE_PREFIX + item2.commodityPicUri,\n                width: 66,\n                height: 55\n              }), /*#__PURE__*/_jsx(TextLabel, {\n                children: item2.commodityName\n              })]\n            }),\n            desc: /*#__PURE__*/_jsxs(RowLayout, {\n              justifyContent: \"space-between\",\n              width: cnst.NUM_WIDTH_MAIN + 6,\n              children: [/*#__PURE__*/_jsx(TextLabel, {\n                color: \"red\",\n                children: JsUtil.currFormat(item2.price)\n              }), /*#__PURE__*/_jsx(IntegerInput, {\n                name: indx + '-' + indx2,\n                min: 1,\n                max: 999,\n                value: item2.finalQty,\n                disabled: true\n              }), /*#__PURE__*/_jsxs(TextLabel, {\n                children: [\"\\u8FD0\\u8D39\\uFF1A\", item2.supplierFreight]\n              }), /*#__PURE__*/_jsxs(TextLabel, {\n                children: [\"\\u4EE3\\u91D1\\uFF1A\", item2.voucherAmount]\n              })]\n            })\n          });\n          checkedList2.push(item2.specId);\n        });\n        var desc = /*#__PURE__*/_jsx(CascadeBox, {\n          name: \"checkedList\",\n          disabled: _this.state.disabled,\n          id: indx,\n          options: options2,\n          value: checkedList2,\n          width: cnst.NUM_WIDTH_MAIN + 6\n        }, item.supplierId);\n        options.push({\n          value: indx,\n          label: /*#__PURE__*/_jsx(TextLabel, {\n            children: item.supplierName\n          }),\n          desc: desc\n        });\n        checkedList.push(indx);\n      });\n      return {\n        options: options,\n        checkedList: checkedList\n      };\n    });\n    _defineProperty(_this, \"memberReceiptAdress\", function () {\n      JsUtil.go2Page(URI.LOGISTICS_ADDRESS_ENTITY + '?mode=' + cnst.SHOW_MODE_NEW + '&orgType=' + cnst.ORG_TYPE_MB);\n    });\n    _defineProperty(_this, \"memberPickupAdress\", function () {\n      JsUtil.go2Page(URI.LOGISTICS_ADDRESS_ENTITY + '?orgType=' + cnst.ORG_TYPE_SS + '&mode=' + cnst.SHOW_MODE_LIST2);\n    });\n    _defineProperty(_this, \"onInputChanged\", function (name, value) {\n      _this.setState(_defineProperty({}, name, value));\n    });\n    _defineProperty(_this, \"onConfirm\", function (value) {\n      console.log(value);\n      JsUtil.closeMsgBox(_this);\n    });\n    _this.params = JsUtil.getUrlParams(_this);\n    _this.orderStore = _this.props.store.orderStore;\n    _this.paymentStore = _this.props.store.paymentStore;\n    _this.state = {\n      selectedAddr: null,\n      receiptAddrOptions: [],\n      selfPickupAddrOptions: [],\n      orderInfo: {},\n      balancePayAmount: 0,\n      totalAmount: 0,\n      totalFreight: 0,\n      totalOfflAmount: 0,\n      totalVoucherAmount: 0,\n      remark: '',\n      disabled: true,\n      messages: {},\n      errors: {\n        remark: false\n      }\n    };\n    return _this;\n  }\n  _inherits(OrderPlace, _React$Component);\n  return _createClass(OrderPlace, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //this.initDefaultAddr();\n      this.initSelfPickupAddrOptions();\n      this.initReceiptAddrOptions();\n    }\n  }, {\n    key: \"initSelfPickupAddrOptions\",\n    value: function initSelfPickupAddrOptions() {\n      var _this2 = this;\n      var subjectId = '';\n      var receiptDefaultId = '';\n      //ssp=self pickup point\n      var uri = '/lg/pub/receipt/address/organization/selfpickup/memb/search?';\n      var param = {};\n      var mallType = this.orderStore.mallType;\n      if (mallType == cnst.MALL_TYPE_G_B2C || mallType == cnst.MALL_TYPE_R_B2C) {\n        subjectId = JsUtil.getAppItem('currUserId');\n        receiptDefaultId = JsUtil.getAppItem('receiptMemId');\n        param.memberId = subjectId;\n        uri += 'memberId=';\n      } else {\n        uri = '/lg/pub/receipt/address/organization/selfpickup/org/search?';\n        subjectId = JsUtil.getAppItem('currOrgId');\n        receiptDefaultId = JsUtil.getAppItem('receiptOrgId');\n        param.orgId = subjectId;\n        uri += 'orgId=';\n      }\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this2, result)) {\n          var selfPickupAddrOptions = result.body;\n          _this2.setState({\n            selfPickupAddrOptions: selfPickupAddrOptions\n          });\n          if (!_this2.state.selectedAddr && selfPickupAddrOptions.length > 0 && _this2.state.receiptAddrOptions.length == 0) {\n            var selectedAddr = selfPickupAddrOptions[0];\n            _this2.setState({\n              selectedAddr: selectedAddr\n            }, function () {\n              return _this2.initGoodsInfo();\n            });\n            _this2.setDefaultReceiptAddrress(mallType, selectedAddr.id, 'selfPickup');\n          }\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this2, result, true, true);\n      };\n      JsUtil.asyncHttpGet(this, uri + subjectId, succ, err);\n    }\n  }, {\n    key: \"initReceiptAddrOptions\",\n    value: function initReceiptAddrOptions() {\n      var _this3 = this;\n      var subjectId = '';\n      var receiptDefaultId = '';\n      var uri = '/lg/pub/receipt/address/memb/search';\n      var param = {};\n      var mallType = this.orderStore.mallType;\n      if (mallType == cnst.MALL_TYPE_G_B2C || mallType == cnst.MALL_TYPE_R_B2C) {\n        subjectId = JsUtil.getAppItem('currUserId');\n        receiptDefaultId = JsUtil.getAppItem('receiptMemId');\n        param.subjectId = subjectId;\n      } else {\n        subjectId = JsUtil.getAppItem('currOrgId');\n        receiptDefaultId = JsUtil.getAppItem('receiptOrgId');\n        param.subjectId = subjectId;\n        uri = '/lg/pub/receipt/address/organization/search';\n      }\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this3, result)) {\n          var receiptAddrOptions = result.body;\n          _this3.setState({\n            receiptAddrOptions: receiptAddrOptions\n          });\n          if (!_this3.state.selectedAddr && receiptAddrOptions.length > 0 && _this3.state.selfPickupAddrOptions.length == 0) {\n            var selectedAddr = receiptAddrOptions[0];\n            _this3.setState({\n              selectedAddr: selectedAddr\n            }, function () {\n              return _this3.initGoodsInfo();\n            });\n            _this3.setDefaultReceiptAddrress(mallType, selectedAddr.id);\n          }\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this3, result);\n      };\n      JsUtil.asyncHttpPost(this, uri, JSON.stringify(param), succ, err);\n    }\n  }, {\n    key: \"initGoodsInfo\",\n    value: function initGoodsInfo() {\n      var _this4 = this;\n      var _this$orderStore2 = this.orderStore,\n        _this$orderStore2$b2b = _this$orderStore2.b2bGlobalQty,\n        b2bGlobalQty = _this$orderStore2$b2b === void 0 ? [] : _this$orderStore2$b2b,\n        _this$orderStore2$b2b2 = _this$orderStore2.b2bGlobalSpecIds,\n        b2bGlobalSpecIds = _this$orderStore2$b2b2 === void 0 ? [] : _this$orderStore2$b2b2,\n        _this$orderStore2$B2b = _this$orderStore2.B2bRegionQty,\n        B2bRegionQty = _this$orderStore2$B2b === void 0 ? [] : _this$orderStore2$B2b,\n        _this$orderStore2$B2b2 = _this$orderStore2.B2bRegionSpecIds,\n        B2bRegionSpecIds = _this$orderStore2$B2b2 === void 0 ? [] : _this$orderStore2$B2b2,\n        _this$orderStore2$b2c = _this$orderStore2.b2cGlobalQty,\n        b2cGlobalQty = _this$orderStore2$b2c === void 0 ? [] : _this$orderStore2$b2c,\n        _this$orderStore2$b2c2 = _this$orderStore2.b2cGlobalSpecIds,\n        b2cGlobalSpecIds = _this$orderStore2$b2c2 === void 0 ? [] : _this$orderStore2$b2c2,\n        _this$orderStore2$b2c3 = _this$orderStore2.b2cRegionQty,\n        b2cRegionQty = _this$orderStore2$b2c3 === void 0 ? [] : _this$orderStore2$b2c3,\n        _this$orderStore2$b2c4 = _this$orderStore2.b2cRegionSpecIds,\n        b2cRegionSpecIds = _this$orderStore2$b2c4 === void 0 ? [] : _this$orderStore2$b2c4,\n        mallType = _this$orderStore2.mallType;\n      var selectedAddr = this.state.selectedAddr;\n      var receiptAddrId = selectedAddr.id;\n      var params = {\n        receiptAddressId: receiptAddrId\n      };\n      var uri = '/cm/pub/b2c/common/search';\n      if (mallType == cnst.MALL_TYPE_G_B2C) {\n        params.b2cGlobalSpecIds = b2cGlobalSpecIds;\n        params.b2cGlobalQty = b2cGlobalQty;\n      } else if (mallType == cnst.MALL_TYPE_R_B2C) {\n        params.b2cRegionSpecIds = b2cRegionSpecIds;\n        params.b2cRegionQty = b2cRegionQty;\n      } else if (mallType == cnst.MALL_TYPE_G_B2B) {\n        uri = '/cm/pub/b2b/common/search';\n        params.b2bGlobalSpecIds = b2bGlobalSpecIds;\n        params.b2bGlobalQty = b2bGlobalQty;\n      } else if (mallType == cnst.MALL_TYPE_R_B2B) {\n        uri = '/cm/pub/b2b/common/search';\n        params.b2bRegionSpecIds = b2bRegionSpecIds;\n        params.b2bRegionQty = b2bRegionQty;\n      }\n      var succ = function succ(result) {\n        var body = result.body;\n        if (JsUtil.handleMessage(_this4, result)) {\n          _this4.setState({\n            orderInfo: body,\n            totalAmount: body.totalAmount,\n            totalFreight: body.totalFreight,\n            totalOfflAmount: body.totalOfflAmount,\n            totalVoucherAmount: body.totalVoucherAmount\n          });\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this4, result, true, true);\n      };\n      JsUtil.asyncHttpPost(this, uri, JSON.stringify(params), succ, err);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var mallType = this.orderStore.mallType;\n      var _this$state2 = this.state,\n        receiptAddrOptions = _this$state2.receiptAddrOptions,\n        selfPickupAddrOptions = _this$state2.selfPickupAddrOptions,\n        selectedAddr = _this$state2.selectedAddr,\n        orderInfo = _this$state2.orderInfo,\n        balancePayAmount = _this$state2.balancePayAmount,\n        totalAmount = _this$state2.totalAmount,\n        totalFreight = _this$state2.totalFreight,\n        _this$state2$totalVou = _this$state2.totalVoucherAmount,\n        totalVoucherAmount = _this$state2$totalVou === void 0 ? 0 : _this$state2$totalVou,\n        remark = _this$state2.remark,\n        disabled = _this$state2.disabled;\n      var totalOfflAmount = this.state.totalOfflAmount;\n\n      //if(!orderInfo) return <HeadLayout/>;\n\n      var _orderInfo$preB2bGlob = orderInfo.preB2bGlobals,\n        preB2bGlobals = _orderInfo$preB2bGlob === void 0 ? [] : _orderInfo$preB2bGlob,\n        _orderInfo$preB2cGlob = orderInfo.preB2cGlobals,\n        preB2cGlobals = _orderInfo$preB2cGlob === void 0 ? [] : _orderInfo$preB2cGlob,\n        _orderInfo$preB2bRegi = orderInfo.preB2bRegions,\n        preB2bRegions = _orderInfo$preB2bRegi === void 0 ? [] : _orderInfo$preB2bRegi,\n        _orderInfo$preB2cRegi = orderInfo.preB2cRegions,\n        preB2cRegions = _orderInfo$preB2cRegi === void 0 ? [] : _orderInfo$preB2cRegi,\n        _orderInfo$balanceAmo = orderInfo.balanceAmount,\n        balanceAmount = _orderInfo$balanceAmo === void 0 ? 0 : _orderInfo$balanceAmo;\n      //if(!(preB2bGlobals || preB2cGlobals || preB2bRegions || preB2cRegions)) return <HeadLayout/>;\n\n      var commodities = this.getCommodityOptions(preB2bGlobals);\n      var preB2bGlobalOptions = commodities.options;\n      var preB2bGlobalCheckedList = commodities.checkedList;\n      commodities = this.getCommodityOptions(preB2cGlobals);\n      var preB2cGlobalOptions = commodities.options;\n      var preB2cGlobalCheckedList = commodities.checkedList;\n      commodities = this.getCommodityOptions(preB2bRegions);\n      var preB2bRegionOptions = commodities.options;\n      var preB2bRegionCheckedList = commodities.checkedList;\n      commodities = this.getCommodityOptions(preB2cRegions);\n      var preB2cRegionOptions = commodities.options;\n      var preB2cRegionCheckedList = commodities.checkedList;\n      totalOfflAmount = JsUtil.add100([totalOfflAmount, -totalVoucherAmount, -balancePayAmount]);\n      if (totalOfflAmount < 0) totalOfflAmount = 0;\n      var totalOnlAmount = JsUtil.add100([totalAmount, totalFreight, -totalVoucherAmount, -balancePayAmount, -totalOfflAmount]);\n      var labelKeyAddr = 'detailAddress';\n      var valueKeyId = 'id';\n      return /*#__PURE__*/_jsxs(HeadLayout, {\n        that: this,\n        topNavBarTitle: '下单',\n        bottomLabel4: '确定',\n        bottomFunc4: this.createOrder,\n        children: [/*#__PURE__*/_jsx(BrView, {\n          height: cnst.NUM_HEIGHT_LINE,\n          backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n        }), /*#__PURE__*/_jsxs(Level2View, {\n          children: [selectedAddr && /*#__PURE__*/_jsxs(Level2View, {\n            children: [/*#__PURE__*/_jsxs(TextLabel, {\n              children: [\"\\u6536\\u8D27\\u5730\\u5740:\\xA0\\xA0\", selectedAddr.detailAddress]\n            }), /*#__PURE__*/_jsxs(TextLabel, {\n              children: [\"\\u6536\\u8D27\\u4EBA:\\xA0\\xA0\", selectedAddr.receiptPerson]\n            }), /*#__PURE__*/_jsxs(TextLabel, {\n              children: [\"\\u8054\\u7CFB\\u7535\\u8BDD:\\xA0\\xA0\", selectedAddr.receiptPhone]\n            })]\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: 22\n          }), selectedAddr && /*#__PURE__*/_jsxs(ColumnLayout, {\n            children: [/*#__PURE__*/_jsx(SelectInput, {\n              options: receiptAddrOptions,\n              labelKey: labelKeyAddr,\n              valueKey: valueKeyId,\n              value: selectedAddr.id,\n              onChange: this.onSelectedReceiptAddr('selectedAddr'),\n              label: this.labels.receiptAddr,\n              disabled: false\n            }), /*#__PURE__*/_jsx(BrView, {\n              height: cnst.NUM_HEIGHT_LINE,\n              backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n            }), /*#__PURE__*/_jsx(SelectInput, {\n              options: selfPickupAddrOptions,\n              labelKey: labelKeyAddr,\n              valueKey: valueKeyId,\n              value: selectedAddr.id,\n              onChange: this.onSelectedPickupAddr('selectedAddr'),\n              label: this.labels.pickupAddr,\n              disabled: false\n            })]\n          }), receiptAddrOptions.length == 0 && selfPickupAddrOptions.length == 0 && /*#__PURE__*/_jsxs(RowLayout, {\n            justifyContent: 'space-between',\n            children: [/*#__PURE__*/_jsx(TextLabel, {\n              color: \"red\",\n              children: \"\\u8FD8\\u6CA1\\u6709\\u6536\\u8D27\\u5730\\u5740, \\u53BB\\u6DFB\\u52A0\"\n            }), /*#__PURE__*/_jsx(GeneralButton, {\n              type: \"primary\",\n              size: \"mini\",\n              width: 50,\n              onClick: this.memberReceiptAdress,\n              children: \"\\u6536\\u8D27\\u5730\\u5740\"\n            }), \"\\xA0\"]\n          })]\n        }), /*#__PURE__*/_jsx(BrView, {\n          height: 22\n        }), /*#__PURE__*/_jsx(BrView, {\n          height: cnst.NUM_HEIGHT_LINE,\n          backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n        }), mallType == cnst.MALL_TYPE_G_B2B && /*#__PURE__*/_jsx(CascadeBox, {\n          name: \"checkedList\",\n          disabled: disabled,\n          options: preB2bGlobalOptions,\n          value: preB2bGlobalCheckedList\n        }), mallType == cnst.MALL_TYPE_G_B2C && /*#__PURE__*/_jsx(CascadeBox, {\n          name: \"checkedList\",\n          disabled: disabled,\n          options: preB2cGlobalOptions,\n          value: preB2cGlobalCheckedList\n        }), mallType == cnst.MALL_TYPE_R_B2B && /*#__PURE__*/_jsx(CascadeBox, {\n          name: \"checkedList\",\n          disabled: disabled,\n          options: preB2bRegionOptions,\n          value: preB2bRegionCheckedList\n        }), mallType == cnst.MALL_TYPE_R_B2C && /*#__PURE__*/_jsx(CascadeBox, {\n          name: \"checkedList\",\n          disabled: disabled,\n          options: preB2cRegionOptions,\n          value: preB2cRegionCheckedList\n        }), /*#__PURE__*/_jsx(BrView, {\n          height: 22\n        }), /*#__PURE__*/_jsxs(Level2View, {\n          children: [/*#__PURE__*/_jsxs(TextLabel, {\n            children: [\"\\u5E10\\u6237\\u4F59\\u989D(\", balanceAmount, \")\\u5143, \\u4F7F\\u7528\\u4F59\\u989D\\u652F\\u4ED8:\"]\n          }), /*#__PURE__*/_jsx(GeneralInput, {\n            min: 0,\n            max: 9999,\n            value: this.state.balancePayAmount,\n            onChange: this.handleBalancePayAmount\n          })]\n        }), /*#__PURE__*/_jsx(BrView, {\n          height: 22\n        }), /*#__PURE__*/_jsx(BrView, {\n          height: cnst.NUM_HEIGHT_LINE,\n          backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n        }), /*#__PURE__*/_jsxs(Level2View, {\n          children: [/*#__PURE__*/_jsxs(TextLabel, {\n            children: [\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\u603B\\u4EF7:\\xA0\\xA0\", JsUtil.currFormat(totalAmount)]\n          }), /*#__PURE__*/_jsxs(TextLabel, {\n            children: [\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\u8FD0\\u8D39:\\xA0\\xA0\", JsUtil.currFormat(totalFreight)]\n          }), /*#__PURE__*/_jsxs(TextLabel, {\n            children: [\"\\u4EE3\\u91D1\\u652F\\u4ED8:\\xA0\\xA0\", JsUtil.currFormat(totalVoucherAmount)]\n          }), /*#__PURE__*/_jsxs(TextLabel, {\n            children: [\"\\u4F59\\u989D\\u652F\\u4ED8:\\xA0\\xA0\", JsUtil.currFormat(balancePayAmount)]\n          }), /*#__PURE__*/_jsxs(TextLabel, {\n            children: [\"\\u8D27\\u5230\\u4ED8\\u6B3E:\\xA0\\xA0\", JsUtil.currFormat(totalOfflAmount)]\n          }), /*#__PURE__*/_jsxs(TextLabel, {\n            children: [\"\\u5728\\u7EBF\\u652F\\u4ED8:\\xA0\\xA0\", JsUtil.currFormat(totalOnlAmount)]\n          })]\n        }), /*#__PURE__*/_jsx(BrView, {\n          height: 22\n        }), /*#__PURE__*/_jsx(Level2View, {\n          children: /*#__PURE__*/_jsx(GeneralInput, {\n            name: 'remark',\n            label: this.labels.remark,\n            type: 'text',\n            value: remark,\n            error: this.state.errors.remark,\n            onChange: this.onInputChanged,\n            disabled: false\n          })\n        }), /*#__PURE__*/_jsx(BrView, {\n          height: 110\n        })]\n      });\n    }\n  }]);\n}(React.Component)) || _class) || _class);\nexport default OrderPlace;","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pkgorder/page/order/OrderPlace!./OrderPlace.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pkgorder/page/order/OrderPlace', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}