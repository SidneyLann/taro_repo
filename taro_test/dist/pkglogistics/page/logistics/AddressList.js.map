{"version":3,"file":"pkglogistics/page/logistics/AddressList.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://i_bizz_client/./src/pkglogistics/page/logistics/AddressList.tsx?e513","webpack://i_bizz_client/._src_pkglogistics_page_logistics_AddressList.tsx"],"sourcesContent":["import _classCallCheck from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nvar _dec, _class;\nimport React from 'react';\nimport { observer, inject } from 'mobx-react';\nimport JsUtil from 'tsx/common/JsUtil';\nimport cnst from 'tsx/common/Constant';\nimport URI from 'tsx/common/URI';\nimport HeadLayout from 'tsx/layout/HeadLayout';\nimport RowLayout from 'tsx/layout/RowLayout';\nimport TextLabel from 'tsx/view/TextLabel';\nimport CascadeBox from 'tsx/form/CascadeBox';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar AddressList = (_dec = inject('store'), _dec(_class = observer(_class = /*#__PURE__*/function (_React$Component) {\n  function AddressList(props) {\n    var _this;\n    _classCallCheck(this, AddressList);\n    _this = _callSuper(this, AddressList, [props]);\n    _defineProperty(_this, \"checkedAllList\", []);\n    _defineProperty(_this, \"params\", void 0);\n    _defineProperty(_this, \"currOrgType\", JsUtil.getAppItem('currOrgType'));\n    _defineProperty(_this, \"searchAddresses\", function (_ref) {\n      var _ref$pageNo = _ref.pageNo,\n        pageNo = _ref$pageNo === void 0 ? 1 : _ref$pageNo,\n        _ref$pageSize = _ref.pageSize,\n        pageSize = _ref$pageSize === void 0 ? cnst.PAGE_SIZE : _ref$pageSize;\n      var mode = _this.params.mode;\n      var param = {};\n      param.receiptPerson = _this.params.receiptPerson;\n      param.receiptPhone = _this.params.receiptPhone;\n      param.regionId = _this.params.regionId;\n      param.detailAddress = _this.params.detailAddress;\n      var uri = '/lg/pub/receipt/address/organization/search';\n      if (_this.params.menuParam == cnst.MENU_MB_G_B2C && mode == cnst.SHOW_MODE_LIST) {\n        uri = '/lg/pub/receipt/address/memb/search';\n        param.subjectId = JsUtil.getAppItem('currUserId');\n      } else if (_this.params.menuParam == cnst.MENU_MB_G_B2C && mode == cnst.SHOW_MODE_LIST2) {\n        param.subjectId = JsUtil.getAppItem('currUserId');\n      } else if (_this.currOrgType == cnst.ORG_TYPE_SS && mode == cnst.SHOW_MODE_LIST2) {} else if (_this.currOrgType == cnst.ORG_TYPE_OP && mode == cnst.SHOW_MODE_LIST2) {} else if (_this.currOrgType == cnst.ORG_TYPE_OP) {\n        param.operatorId = JsUtil.getAppItem('currOrgId');\n      } else {\n        param.subjectId = JsUtil.getAppItem('currOrgId');\n      }\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result)) {\n          var data = result.body;\n          var checkedList = [];\n          data.map(function (item, idx) {\n            checkedList.push(item.id);\n          });\n          _this.checkedAllList = [].concat(checkedList);\n          _this.setState({\n            addresses: data,\n            totalRecords: result.totalRecords\n          });\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result);\n      };\n      JsUtil.asyncHttpPost(_this, uri, JSON.stringify(param), succ, err);\n    });\n    _defineProperty(_this, \"editAddress\", function (event) {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n      } else if (checkedList.length > 1) {\n        JsUtil.showMsgBox(_this, '只能选择一条记录');\n      } else {\n        JsUtil.go2Page(URI.LOGISTICS_ADDRESS_ENTITY + '?mode=' + cnst.SHOW_MODE_EDIT + '&mallType=' + _this.params.mallType + '&orgType=' + _this.params.orgType + '&id=' + checkedList[0] + '&regionId=' + _this.state.addresses.find(function (e) {\n          return e.id == checkedList[0];\n        }).regionId);\n      }\n    });\n    _defineProperty(_this, \"clone\", function () {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n        return;\n      }\n      var uri = '/lg/pub/receipt/address/org/memb/create';\n      JsUtil.asyncHttpPost(_this, uri, JSON.stringify(checkedList), function (res) {\n        if (JsUtil.handleMessage(_this, res, true)) {\n          _this.setState(_defineProperty({}, name, []));\n          _this.searchAddresses({});\n        }\n      }, function (err) {\n        return JsUtil.handleMessage(_this, err, true);\n      });\n    });\n    _defineProperty(_this, \"deleteAddress\", function () {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n        return;\n      }\n      var uri = '/lg/pub/receipt/address/memb/delete';\n      if (_this.params.mode == cnst.SHOW_MODE_LIST2) {\n        uri = '/lg/pub/receipt/address/org/memb/delete';\n      } else if (_this.params.menuParam != cnst.MENU_MB_G_B2C) {\n        uri = '/lg/pub/receipt/address/organization/delete';\n      }\n      JsUtil.asyncHttpPost(_this, uri, JSON.stringify(checkedList), function (res) {\n        if (JsUtil.handleMessage(_this, res, true)) {\n          _this.setState(_defineProperty({}, name, []));\n          _this.searchAddresses({});\n        }\n      }, function (err) {\n        return JsUtil.handleMessage(_this, err, true);\n      });\n    });\n    _defineProperty(_this, \"detailView\", function (event) {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n      } else if (checkedList.length > 1) {\n        JsUtil.showMsgBox(_this, '只能选择一条记录');\n      } else {\n        JsUtil.go2Page(URI.LOGISTICS_ADDRESS_ENTITY + '?mode=' + cnst.SHOW_MODE_VIEW + '&mallType=' + _this.params.mallType + '&orgType=' + _this.params.orgType + '&id=' + checkedList[0] + '&regionId=' + _this.state.addresses.find(function (e) {\n          return e.id == checkedList[0];\n        }).regionId);\n      }\n    });\n    _defineProperty(_this, \"getAddressOptions\", function (records) {\n      var options = [];\n      records.map(function (item, indx) {\n        var desc = /*#__PURE__*/_jsxs(RowLayout, {\n          justifyContent: \"space-between\",\n          width: cnst.NUM_WIDTH_MAIN + 3,\n          children: [/*#__PURE__*/_jsx(TextLabel, {\n            children: item.receiptPerson\n          }), /*#__PURE__*/_jsx(TextLabel, {\n            children: item.receiptPhone\n          })]\n        });\n        options.push({\n          value: item.id,\n          label: item.detailAddress,\n          desc: desc\n        });\n      });\n      return options;\n    });\n    _defineProperty(_this, \"onCheckBoxesAllChanged\", function (name, selectedValues) {\n      if (selectedValues.length == 0) {\n        _this.setState(_defineProperty({}, name, []));\n      } else {\n        _this.setState(_defineProperty({}, name, _this.checkedAllList));\n      }\n    });\n    _defineProperty(_this, \"onCascadeBoxChanged\", function (name, selectedValues) {\n      _this.setState(_defineProperty({}, name, selectedValues));\n    });\n    _defineProperty(_this, \"onConfirm\", function () {\n      JsUtil.closeMsgBox(_this);\n    });\n    _this.params = JsUtil.getUrlParams(_this);\n    _this.state = {\n      addresses: [],\n      checkedList: [],\n      currPage: 1,\n      totalRecords: 0,\n      messages: {}\n    };\n    _this.searchAddresses({});\n    return _this;\n  }\n  _inherits(AddressList, _React$Component);\n  return _createClass(AddressList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var mode = this.params.mode;\n      var _this$state = this.state,\n        addresses = _this$state.addresses,\n        currPage = _this$state.currPage,\n        totalRecords = _this$state.totalRecords,\n        checkedList = _this$state.checkedList;\n      var options = this.getAddressOptions(addresses);\n      var topNavBarTitle = this.currOrgType == cnst.ORG_TYPE_MB ? '会员收货地址列表' : '机构收货地址列表';\n      var commandLabel3 = '删除';\n      var commandLabel4 = '编辑';\n      var command4 = this.editAddress;\n      if (this.currOrgType == cnst.ORG_TYPE_MB && mode == cnst.SHOW_MODE_LIST) {} else if (this.currOrgType == cnst.ORG_TYPE_MB && mode == cnst.SHOW_MODE_LIST2) {\n        commandLabel4 = '';\n      } else if (this.currOrgType == cnst.ORG_TYPE_SS && mode == cnst.SHOW_MODE_LIST2 || this.currOrgType == cnst.ORG_TYPE_OP && mode == cnst.SHOW_MODE_LIST2) {\n        commandLabel3 = '';\n        commandLabel4 = '添加';\n        command4 = this.clone;\n      }\n      return /*#__PURE__*/_jsx(HeadLayout, {\n        that: this,\n        topNavBarTitle: topNavBarTitle,\n        bottomLabel1: '全选',\n        bottomFunc1: this.onCheckBoxesAllChanged,\n        bottomLabel2: '明细',\n        bottomFunc2: this.detailView,\n        bottomLabel3: commandLabel3,\n        bottomFunc3: this.deleteAddress,\n        bottomLabel4: commandLabel4,\n        bottomFunc4: command4,\n        children: /*#__PURE__*/_jsx(CascadeBox, {\n          name: \"checkedList\",\n          options: options,\n          value: checkedList,\n          onChange: this.onCascadeBoxChanged,\n          width: cnst.NUM_WIDTH_MAIN,\n          BrHeight: 1\n        })\n      });\n    }\n  }]);\n}(React.Component)) || _class) || _class);\nexport default AddressList;","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pkglogistics/page/logistics/AddressList!./AddressList.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pkglogistics/page/logistics/AddressList', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}