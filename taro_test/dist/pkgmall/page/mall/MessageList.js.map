{"version":3,"file":"pkgmall/page/mall/MessageList.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://i_bizz_client/./src/pkgmall/page/mall/MessageList.tsx?747e","webpack://i_bizz_client/._src_pkgmall_page_mall_MessageList.tsx"],"sourcesContent":["import _classCallCheck from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport React from \"react\";\nimport JsUtil from 'tsx/common/JsUtil';\nimport cnst from 'tsx/common/Constant';\nimport URI from 'tsx/common/URI';\nimport HeadLayout from 'tsx/layout/HeadLayout';\nimport RowLayout from 'tsx/layout/RowLayout';\nimport TextLabel from 'tsx/view/TextLabel';\nimport CascadeBox from 'tsx/form/CascadeBox';\nimport TaroModal from 'tsx/component/TaroModal';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar MessageList = /*#__PURE__*/function (_React$Component) {\n  function MessageList(props) {\n    var _this;\n    _classCallCheck(this, MessageList);\n    _this = _callSuper(this, MessageList, [props]);\n    _defineProperty(_this, \"currOrgId\", JsUtil.getAppItem('currOrgId'));\n    _defineProperty(_this, \"currUserId\", JsUtil.getAppItem('currUserId'));\n    _defineProperty(_this, \"handleChange\", function (key) {\n      return function (e) {\n        console.log(e);\n        _this.setState(_defineProperty({}, key, e.target.value));\n      };\n    });\n    _defineProperty(_this, \"search\", function (pageNo) {\n      var params = {\n        orgName: _this.params.orgName,\n        buyerUserName: _this.params.buyerUserName,\n        sellerUserName: _this.params.sellerUserName,\n        contentType: _this.params.contentType,\n        interactContent: _this.params.interactContent,\n        status: _this.params.status\n      };\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result)) {\n          var data = result.body;\n          //          const checkedList = []\n          //\n          //          data.map((item, idx) => {\n          //            checkedList.push(item.id)\n          //          })\n          //\n          //          this.checkedAllList = [...checkedList]\n\n          _this.setState({\n            entities: data,\n            totalRecords: result.totalRecords\n          });\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result);\n      };\n      JsUtil.asyncHttpPost(_this, \"/ml/pub/customer/service/search\", JSON.stringify(params), succ, err);\n    });\n    _defineProperty(_this, \"detailFunc\", function (mode) {\n      return function (event) {\n        var checkedList = _this.state.checkedList;\n        if (checkedList.length == 0) {\n          JsUtil.showMsgBox(_this, '请至少选中一项');\n        } else if (checkedList.length > 1) {\n          JsUtil.showMsgBox(_this, '只能选择一条记录');\n        } else {\n          _this.setState({\n            popupImage: true\n          });\n        }\n      };\n    });\n    _defineProperty(_this, \"onCheckBoxesAllChanged\", function (name, selectedValues) {\n      if (selectedValues.length == 0) {\n        _this.setState(_defineProperty({}, name, []));\n      } else {\n        _this.setState(_defineProperty({}, name, _this.checkedAllList));\n      }\n    });\n    _defineProperty(_this, \"onCascadeBoxChanged\", function (name, selectedValues) {\n      _this.setState(_defineProperty({}, name, selectedValues));\n    });\n    _defineProperty(_this, \"getOptions\", function (records) {\n      var options = [];\n      records.map(function (item, indx) {\n        var desc = /*#__PURE__*/_jsxs(RowLayout, {\n          justifyContent: \"space-between\",\n          width: cnst.NUM_WIDTH_MAIN + 3,\n          children: [/*#__PURE__*/_jsx(TextLabel, {\n            children: item.buyerUserId\n          }), /*#__PURE__*/_jsx(TextLabel, {\n            children: item.buyerUserName\n          })]\n        });\n        options.push({\n          value: item.id,\n          label: item.interactContent,\n          desc: desc\n        });\n      });\n      return options;\n    });\n    _defineProperty(_this, \"openChatting\", function () {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n        return;\n      } else if (checkedList.length > 1) {\n        JsUtil.showMsgBox(_this, '只能选择一条记录');\n        return;\n      }\n      var checkedEntity = _this.state.entities.find(function (item) {\n        return item.id == checkedList[0];\n      });\n      var sellerUserId = JsUtil.getAppItem('currUserId');\n      var sellerUserName = JsUtil.getAppItem('currUserName');\n      JsUtil.go2Page(URI.MALL_CHATTING + '?directType=3' + '&id=' + checkedEntity.id + '&status=' + checkedEntity.status + '&mallType=' + checkedEntity.mallType + '&orgId=' + checkedEntity.orgId + '&orgName=' + checkedEntity.orgName + '&buyerUserId=' + checkedEntity.buyerUserId + '&buyerUserName=' + checkedEntity.buyerUserName + '&sellerUserId=' + sellerUserId + '&sellerUserName=' + sellerUserName);\n    });\n    _defineProperty(_this, \"closeImage\", function () {\n      _this.setState({\n        popupImage: false\n      });\n    });\n    _this.params = JsUtil.getUrlParams(_this);\n    _this.state = {\n      entities: [],\n      totalRecords: \"\",\n      checkedList: [],\n      popupImage: false,\n      messages: {}\n    };\n    return _this;\n  }\n  _inherits(MessageList, _React$Component);\n  return _createClass(MessageList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.search();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$state = this.state,\n        entities = _this$state.entities,\n        checkedList = _this$state.checkedList;\n      var options = this.getOptions(entities);\n      return /*#__PURE__*/_jsxs(HeadLayout, {\n        entities: this.state.messages,\n        topNavBarTitle: '客服消息列表',\n        bottomLabel2: '明细',\n        bottomFunc2: this.openChatting,\n        children: [/*#__PURE__*/_jsx(CascadeBox, {\n          name: \"checkedList\",\n          options: options,\n          value: checkedList,\n          onChange: this.onCascadeBoxChanged\n        }), /*#__PURE__*/_jsx(TaroModal, {\n          isOpened: this.state.popupImage,\n          onClose: function onClose(e) {\n            return _this2.onClose('popupImage', e);\n          },\n          onCancel: this.closeImage,\n          cancelText: \"\\u5173\\u95ED\"\n        })]\n      });\n    }\n  }]);\n}(React.Component);\nexport default MessageList;","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pkgmall/page/mall/MessageList!./MessageList.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pkgmall/page/mall/MessageList', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}