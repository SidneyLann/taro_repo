{"version":3,"file":"pkgmall/page/mall/CommodityListByKeyword.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://i_bizz_client/./src/pkgmall/page/mall/CommodityListByKeyword.tsx?cd29","webpack://i_bizz_client/._src_pkgmall_page_mall_CommodityListByKeyword.tsx"],"sourcesContent":["import _classCallCheck from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport React from 'react';\nimport JsUtil from 'tsx/common/JsUtil';\nimport cnst from 'tsx/common/Constant';\nimport statuses from 'tsx/common/Statuses';\nimport HeadLayout from 'tsx/layout/HeadLayout';\nimport CmmdListTemplate from './CmmdListTemplate';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar CommodityListByKeyword = /*#__PURE__*/function (_React$Component) {\n  function CommodityListByKeyword(props) {\n    var _this;\n    _classCallCheck(this, CommodityListByKeyword);\n    _this = _callSuper(this, CommodityListByKeyword, [props]);\n    _defineProperty(_this, \"params\", void 0);\n    _defineProperty(_this, \"searchMallCommodity\", function () {\n      var mallType = JsUtil.getAppItem('currMallType');\n      var operatorId = JsUtil.getAppItem('currOperatorId');\n      if (!operatorId) {\n        operatorId = cnst.ID_NO;\n      }\n      var supplierId = _this.params.supplierId;\n      var commodityName = JsUtil.decode(_this.params.commodityName);\n      var uri = '';\n      if (cnst.MALL_TYPE_G_B2B == mallType) {\n        uri = '/cm/pub/b2b/global/commodity/search';\n      } else if (cnst.MALL_TYPE_G_B2C == mallType) {\n        uri = '/cm/pub/b2c/global/commodity/search';\n      } else if (cnst.MALL_TYPE_R_B2B == mallType) {\n        uri = '/cm/pub/b2b/region/commodity/search';\n      } else if (cnst.MALL_TYPE_R_B2C == mallType) {\n        uri = '/cm/pub/b2c/region/commodity/search';\n      }\n      var param = {\n        operatorId: operatorId,\n        commodityName: commodityName,\n        deliveryType: _this.params.deliveryType,\n        receiptAddrId: _this.params.receiptAddrId,\n        status: statuses.cmd.STATUS_ON_SALE,\n        pageNo: _this.state.pageNo,\n        sorting: _this.state.sorting\n      };\n      if (supplierId) param.supplierId = supplierId;\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result)) {\n          var commodities = result.body;\n          if (commodities.length == 0) {\n            JsUtil.showMsgBox(_this, '没有搜索到商品，您可以切换到其它商城(主页-->商城-->切换商城)；或切换到其它收货地址；或推荐朋友开店供货(您会有提成)');\n            return;\n          }\n          var gridArr = [];\n          var picUri = '';\n          commodities.map(function (commodity) {\n            picUri = commodity.id ? JSON.parse(commodity.bigImageUri)[0] : commodity.commodityPicUri;\n            gridArr.push({\n              commodityId: commodity.commodityId || commodity.id,\n              commodityPicUri: picUri,\n              commodityName: commodity.commodityName,\n              price: commodity.price,\n              awardRate: commodity.awardRate,\n              presentRate: commodity.presentRate,\n              voucherRate: commodity.voucherRate\n            });\n          });\n          _this.setState({\n            data: gridArr\n          });\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result);\n      };\n      JsUtil.asyncHttpPost(_this, uri, JSON.stringify(param), succ, err);\n    });\n    _defineProperty(_this, \"handleSortChanged\", function (sort) {\n      _this.setState({\n        sorting: sort\n      }, function () {\n        return _this.searchMallCommodity();\n      });\n    });\n    _defineProperty(_this, \"onConfirm\", function () {\n      JsUtil.closeMsgBox(_this);\n    });\n    _this.params = JsUtil.getUrlParams(_this);\n    _this.state = {\n      data: [],\n      sorting: 1\n    };\n    return _this;\n  }\n  _inherits(CommodityListByKeyword, _React$Component);\n  return _createClass(CommodityListByKeyword, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.searchMallCommodity();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      return /*#__PURE__*/_jsx(HeadLayout, {\n        that: this,\n        topNavBarTitle: \"\\u5173\\u952E\\u5B57\\u641C\\u7D22\",\n        children: /*#__PURE__*/_jsx(CmmdListTemplate, {\n          data: this.state.data,\n          onSortChange: function onSortChange(sort) {\n            return _this2.handleSortChanged(sort);\n          }\n        })\n      });\n    }\n  }]);\n}(React.Component);\nexport default CommodityListByKeyword;","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pkgmall/page/mall/CommodityListByKeyword!./CommodityListByKeyword.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pkgmall/page/mall/CommodityListByKeyword', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}