{"version":3,"file":"pkgsubject/page/others/OrgJoinApplication.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://i_bizz_client/./src/pkgsubject/page/others/OrgJoinApplication.tsx?8329","webpack://i_bizz_client/._src_pkgsubject_page_others_OrgJoinApplication.tsx"],"sourcesContent":["import _classCallCheck from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport React from 'react';\nimport JsUtil from 'tsx/common/JsUtil';\nimport cnst from 'tsx/common/Constant';\nimport BrView from 'tsx/view/BrView';\nimport HeadLayout from 'tsx/layout/HeadLayout';\nimport RowLayout from 'tsx/layout/RowLayout';\nimport TextLabel from 'tsx/view/TextLabel';\nimport GeneralInput from 'tsx/form/GeneralInput';\nimport SelectInput from 'tsx/form/SelectInput';\nimport CascadeBox from 'tsx/form/CascadeBox';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar OrgJoinApplication = /*#__PURE__*/function (_React$Component) {\n  function OrgJoinApplication(props) {\n    var _this;\n    _classCallCheck(this, OrgJoinApplication);\n    _this = _callSuper(this, OrgJoinApplication, [props]);\n    _defineProperty(_this, \"labels\", _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, cnst.ORG_TYPE_SP_B, '供应商名称'), cnst.ORG_TYPE_HQ, '总部名称'), cnst.ORG_TYPE_OP, '运营中心名称'), cnst.ORG_TYPE_SS, '服务站名称'), \"personType\", '人员类型'));\n    _defineProperty(_this, \"currOrgType\", JsUtil.getAppItem('currOrgType'));\n    _defineProperty(_this, \"searchOrgList\", function () {\n      var orgType = _this.state.orgType;\n      var uriName = '';\n      if (orgType == cnst.ORG_TYPE_SP_B) uriName = 'supplier';else if (orgType == cnst.ORG_TYPE_HQ) uriName = 'headquarter';else if (orgType == cnst.ORG_TYPE_OP) uriName = 'operator';else if (orgType == cnst.ORG_TYPE_SS) uriName = 'servicestation';\n      var uri = \"/\".concat(uriName, \"/name/search\");\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result)) {\n          _this.setState({\n            entities: result.body\n          });\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result, true);\n      };\n      JsUtil.asyncHttpPost(_this, uri, JSON.stringify(_defineProperty({\n        orgType: orgType\n      }, \"\".concat(uriName, \"Name\"), _this.state.orgName)), succ, err);\n    });\n    _defineProperty(_this, \"getOrgOptions\", function (records) {\n      var options = [];\n      records.map(function (item, indx) {\n        var desc = /*#__PURE__*/_jsxs(RowLayout, {\n          children: [/*#__PURE__*/_jsx(TextLabel, {\n            children: item.first\n          }), /*#__PURE__*/_jsx(TextLabel, {\n            children: item.third\n          })]\n        });\n        options.push({\n          value: item.first,\n          label: item.second,\n          desc: desc\n        });\n      });\n      return options;\n    });\n    _defineProperty(_this, \"submitFunc\", function () {\n      var checkedList = _this.state.checkedList;\n      if (checkedList.length == 0) {\n        JsUtil.showMsgBox(_this, '请至少选中一项');\n        return;\n      } else if (checkedList.length > 1) {\n        JsUtil.showMsgBox(_this, '只能选择一条记录');\n        return;\n      }\n      var id = checkedList[0];\n      var orgName = _this.state.entities.find(function (e) {\n        return e.first == id;\n      }).second;\n      var personType = _this.state.personType;\n      var uri = \"/mb/pub/org/join?orgId=\".concat(id, \"&orgName=\").concat(orgName, \"&personType=\").concat(personType);\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result, true)) {}\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result, true);\n      };\n      JsUtil.asyncHttpGet(_this, uri, succ, err);\n    });\n    _defineProperty(_this, \"onCascadeBoxChanged\", function (name, selectedValues) {\n      _this.setState(_defineProperty({}, name, selectedValues));\n    });\n    _defineProperty(_this, \"onInputChanged\", function (name, value) {\n      // if (this.state.mode != cnst.SHOW_MODE_LIST)\n      // this.validateFields(this, validator, name, value);\n\n      _this.setState(_defineProperty({}, name, value));\n    });\n    _defineProperty(_this, \"goBack\", function () {\n      JsUtil.goBack();\n    });\n    _defineProperty(_this, \"onConfirm\", function () {\n      JsUtil.closeMsgBox(_this);\n    });\n    _this.state = {\n      entities: [],\n      orgType: cnst.ORG_TYPE_SP_B,\n      orgTypeOptions: [{\n        value: cnst.ORG_TYPE_SP_B,\n        label: '供应商'\n      }, {\n        value: cnst.ORG_TYPE_HQ,\n        label: '总部'\n      }, {\n        value: cnst.ORG_TYPE_OP,\n        label: '运营中心'\n      }, {\n        value: cnst.ORG_TYPE_SS,\n        label: '服务站'\n      }],\n      orgName: '',\n      personTypeOptions: [{\n        value: 1,\n        label: '兼职'\n      }, {\n        value: 3,\n        label: '全职'\n      }],\n      personType: 1,\n      checkedList: [],\n      errors: {\n        orgName: false\n      }\n    };\n    return _this;\n  }\n  _inherits(OrgJoinApplication, _React$Component);\n  return _createClass(OrgJoinApplication, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n        entities = _this$state.entities,\n        orgTypeOptions = _this$state.orgTypeOptions,\n        orgType = _this$state.orgType,\n        orgName = _this$state.orgName,\n        personTypeOptions = _this$state.personTypeOptions,\n        personType = _this$state.personType,\n        checkedList = _this$state.checkedList;\n      var options = this.getOrgOptions(entities);\n      var labelKey = 'label';\n      var valueKey = 'value';\n      var labelWidth = cnst.NUM_WIDTH_LABEL;\n      var valueWidth = cnst.NUM_WIDTH_VALUE;\n      var topNavBarTitle = '加入机构申请';\n      var command1Label = '查找';\n      var command1 = this.searchOrgList;\n      var command2Label = '申请';\n      var command2 = this.submitFunc;\n      var disabled = false;\n      return /*#__PURE__*/_jsxs(HeadLayout, {\n        that: this,\n        topNavBarTitle: topNavBarTitle,\n        bottomLabel3: command1Label,\n        bottomFunc3: command1,\n        bottomLabel4: command2Label,\n        bottomFunc4: command2,\n        children: [/*#__PURE__*/_jsx(BrView, {\n          height: cnst.NUM_HEIGHT_LINE,\n          backgroundColor: cnst.COLOR_BACKGROUND_WHITE\n        }), /*#__PURE__*/_jsx(SelectInput, {\n          options: orgTypeOptions,\n          labelKey: labelKey,\n          valueKey: valueKey,\n          value: orgType,\n          onChange: JsUtil.onValueChange(this, 'orgType'),\n          label: '*机构类型',\n          disabled: disabled,\n          labelWidth: labelWidth,\n          valueWidth: valueWidth\n        }), /*#__PURE__*/_jsx(BrView, {\n          height: cnst.NUM_HEIGHT_LINE,\n          backgroundColor: cnst.COLOR_BACKGROUND_WHITE\n        }), /*#__PURE__*/_jsx(GeneralInput, {\n          name: 'orgName',\n          label: this.labels[orgType],\n          type: 'text',\n          value: orgName,\n          error: this.state.errors.orgName,\n          onChange: this.onInputChanged,\n          disabled: disabled,\n          labelWidth: labelWidth,\n          valueWidth: valueWidth\n        }), /*#__PURE__*/_jsx(BrView, {\n          height: cnst.NUM_HEIGHT_LINE,\n          backgroundColor: cnst.COLOR_BACKGROUND_WHITE\n        }), /*#__PURE__*/_jsx(SelectInput, {\n          options: personTypeOptions,\n          labelKey: labelKey,\n          valueKey: valueKey,\n          value: personType,\n          onChange: JsUtil.onValueChange(this, 'personType'),\n          label: '*' + this.labels.personType,\n          disabled: disabled,\n          labelWidth: labelWidth,\n          valueWidth: valueWidth\n        }), /*#__PURE__*/_jsx(BrView, {\n          height: cnst.NUM_HEIGHT_LINE,\n          backgroundColor: cnst.COLOR_BACKGROUND_WHITE\n        }), /*#__PURE__*/_jsx(CascadeBox, {\n          name: \"checkedList\",\n          options: options,\n          value: checkedList,\n          onChange: this.onCascadeBoxChanged\n        })]\n      });\n    }\n  }]);\n}(React.Component);\nexport default OrgJoinApplication;","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pkgsubject/page/others/OrgJoinApplication!./OrgJoinApplication.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pkgsubject/page/others/OrgJoinApplication', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}