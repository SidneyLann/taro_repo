{"version":3,"file":"pkgsubject/page/servicestation/ServiceStationList.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://i_bizz_client/./src/pkgsubject/page/servicestation/ServiceStationList.tsx?c831","webpack://i_bizz_client/._src_pkgsubject_page_servicestation_ServiceStationList.tsx"],"sourcesContent":["import _classCallCheck from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport React from 'react';\nimport JsUtil from 'tsx/common/JsUtil';\nimport cnst from 'tsx/common/Constant';\nimport HeadLayout from 'tsx/layout/HeadLayout';\nimport RowLayout from 'tsx/layout/RowLayout';\nimport TextLabel from 'tsx/view/TextLabel';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ServiceStationList = /*#__PURE__*/function (_React$Component) {\n  function ServiceStationList(props) {\n    var _this;\n    _classCallCheck(this, ServiceStationList);\n    _this = _callSuper(this, ServiceStationList, [props]);\n    _defineProperty(_this, \"currOrgId\", JsUtil.getAppItem('currOrgId'));\n    _defineProperty(_this, \"orgType\", JsUtil.getAppItem('currOrgType'));\n    _defineProperty(_this, \"fetchStore\", function (_ref) {\n      var _ref$pageNo = _ref.pageNo,\n        pageNo = _ref$pageNo === void 0 ? 1 : _ref$pageNo,\n        _ref$status = _ref.status,\n        status = _ref$status === void 0 ? _this.state.currentStatus : _ref$status,\n        _ref$pageSize = _ref.pageSize,\n        pageSize = _ref$pageSize === void 0 ? _this.state.rowsPerPage : _ref$pageSize,\n        _ref$storeName = _ref.storeName,\n        storeName = _ref$storeName === void 0 ? _this.state.storeName : _ref$storeName,\n        _ref$createTime = _ref.createTime,\n        createTime = _ref$createTime === void 0 ? _this.state.createTime : _ref$createTime,\n        _ref$createTime2 = _ref.createTime2,\n        createTime2 = _ref$createTime2 === void 0 ? _this.state.createTime2 : _ref$createTime2;\n      var searchParam = {\n        pageNo: pageNo,\n        status: status,\n        pageSize: pageSize,\n        storeName: storeName,\n        createTime: JsUtil.appendTime(createTime),\n        createTime2: createTime2\n      };\n      searchParam.operatorId = JsUtil.getAppItem(\"currOrgId\");\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result)) {\n          _this.setState({\n            serviceStations: res.body\n          });\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result);\n      };\n      JsUtil.asyncHttpPost(_this, \"/ss/pub/search\", JSON.stringify(searchParam), succ, err);\n    });\n    _defineProperty(_this, \"changeStore\", function (event, id) {\n      if (_this.state.selected.length == 0) {\n        JsUtil.showMsgBox(_this, \"请先选中才可以修改\");\n      } else if (_this.state.selected.length > 1) {\n        JsUtil.showMsgBox(_this, \"每次只能修改一个社区店\");\n      } else {\n        _this.props.history.push(\"/mgt/createStore?mode=3&id=\" + id);\n      }\n    });\n    _defineProperty(_this, \"detailStore\", function (event, id) {\n      if (_this.state.selected.length == 0) {\n        JsUtil.showMsgBox(_this, \"请先选中才可以明细\");\n      } else if (_this.state.selected.length > 1) {\n        JsUtil.showMsgBox(_this, \"每次只能明细一个社区店\");\n      } else {\n        _this.props.history.push(\"/mgt/createStore?mode=5&id=\" + id);\n      }\n    });\n    _defineProperty(_this, \"amountDelete\", function () {\n      console.log(\"amount delete\");\n      if (_this.state.selected.length == 0) {\n        JsUtil.showMsgBox(_this, \"请先选中才可以删除\");\n      } else {\n        var succ = function succ(result) {\n          if (result.code == cnst.CODE_COMM_0_SUCCESS) {\n            _that.fetchStore({});\n          } else JsUtil.showMsgBox(this, result.message);\n        };\n        var err = function err(result) {\n          JsUtil.showMsgBox(this, \"请求失败:\" + result.message);\n        };\n        var _that = _this;\n        JsUtil.asyncHttpPost(_this, \"/ss/pub/delete\", JSON.stringify(_this.state.selected), succ, err);\n      }\n    });\n    _defineProperty(_this, \"handleChange\", function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n        console.log(event.target.value);\n      };\n    });\n    _defineProperty(_this, \"checkStore\", function (event, id) {\n      if (_this.state.selected.length == 0) {\n        JsUtil.showMsgBox(_this, \"请先选中才可以审批\");\n      } else if (_this.state.selected.length > 1) {\n        JsUtil.showMsgBox(_this, \"每次只能审批一个社区店\");\n      } else {\n        _this.setState({\n          openCheckDialog: true\n        });\n      }\n    });\n    _defineProperty(_this, \"passcheck\", function (rowId, reason, pass) {\n      function succ(result) {\n        if (result.code == cnst.CODE_COMM_0_SUCCESS) {\n          that.fetchStore({});\n        } else JsUtil.showMsgBox(this, result.message);\n      }\n      function err(result) {\n        JsUtil.showMsgBox(this, \"请求失败:\" + result.message);\n      }\n      JsUtil.asyncHttpPost(_this, \"/ss/pub/approve/update\", \"id=\" + rowId + \"&pass=\" + pass + \"&remark=\" + reason, succ, err, \"application/x-www-form-urlencoded\");\n      _this.setState({\n        openCheckDialog: false\n      });\n    });\n    _defineProperty(_this, \"closeCheckDialog\", function () {\n      _this.setState({\n        openCheckDialog: false\n      });\n    });\n    _defineProperty(_this, \"handleSelectAllClick\", function (event) {\n      if (event.target.checked) {\n        _this.setState(function (state) {\n          return {\n            selected: state.stores.map(function (n) {\n              return n.id;\n            })\n          };\n        });\n        return;\n      }\n      _this.setState({\n        selected: []\n      });\n    });\n    _defineProperty(_this, \"getServiceStationOptions\", function (records) {\n      var options = [];\n      records.map(function (item, indx) {\n        var desc = /*#__PURE__*/_jsxs(RowLayout, {\n          justifyContent: \"space-between\",\n          width: cnst.NUM_WIDTH_MAIN + 3,\n          children: [/*#__PURE__*/_jsx(TextLabel, {\n            children: item.legalRepresentative\n          }), /*#__PURE__*/_jsx(TextLabel, {\n            children: item.contactName\n          })]\n        });\n        options.push({\n          value: item.id,\n          label: item.supplierName,\n          desc: desc\n        });\n      });\n      return options;\n    });\n    _defineProperty(_this, \"onCheckBoxesAllChanged\", function (name, selectedValues) {\n      if (selectedValues.length == 0) {\n        _this.setState(_defineProperty({}, name, []));\n      } else {\n        _this.setState(_defineProperty({}, name, _this.checkedAllList));\n      }\n    });\n    _defineProperty(_this, \"onCascadeBoxChanged\", function (name, selectedValues) {\n      _this.setState(_defineProperty({}, name, selectedValues));\n    });\n    _defineProperty(_this, \"onConfirm\", function () {\n      JsUtil.closeMsgBox(_this);\n    });\n    _this.params = JsUtil.getUrlParams(_this);\n    _this.state = {\n      serviceStations: [],\n      checkedList: [],\n      supplierName: \"\",\n      messages: {}\n    };\n    return _this;\n  }\n  _inherits(ServiceStationList, _React$Component);\n  return _createClass(ServiceStationList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchStore({});\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n        serviceStations = _this$state.serviceStations,\n        currPage = _this$state.currPage,\n        totalRecords = _this$state.totalRecords,\n        checkedList = _this$state.checkedList;\n      var options = this.getServiceStationOptions(serviceStations);\n      var topNavBarTitle = this.params.orgType == cnst.ORG_TYPE_MB ? '会员收货地址列表' : '机构收货地址列表';\n      var commandLabel3 = '删除';\n      var commandLabel4 = '编辑';\n      var command4 = this.editAddress;\n      if (this.params.mode == cnst.SHOW_MODE_LIST2) {\n        if (this.params.orgType == cnst.ORG_TYPE_MB) {\n          commandLabel4 = '';\n        } else {\n          commandLabel3 = '';\n          commandLabel4 = '添加';\n          command4 = this.cloneAddress;\n        }\n      }\n      return /*#__PURE__*/_jsx(HeadLayout, {\n        that: this,\n        topNavBarTitle: topNavBarTitle,\n        bottomLabel1: '全选',\n        bottomFunc1: this.onCheckBoxesAllChanged,\n        bottomLabel2: '明细',\n        bottomFunc2: this.detailAddresss,\n        bottomLabel3: commandLabel3,\n        bottomFunc3: this.deleteAddress,\n        bottomLabel4: commandLabel4,\n        bottomFunc4: command4,\n        children: /*#__PURE__*/_jsx(CascadeBox, {\n          name: \"checkedList\",\n          options: options,\n          value: checkedList,\n          onChange: this.onCascadeBoxChanged\n        })\n      });\n    }\n  }]);\n}(React.Component);\nexport default ServiceStationList;","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pkgsubject/page/servicestation/ServiceStationList!./ServiceStationList.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pkgsubject/page/servicestation/ServiceStationList', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}