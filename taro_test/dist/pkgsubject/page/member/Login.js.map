{"version":3,"file":"pkgsubject/page/member/Login.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://i_bizz_client/./src/pkgsubject/page/member/Login.tsx?4de0","webpack://i_bizz_client/._src_pkgsubject_page_member_Login.tsx"],"sourcesContent":["import _classCallCheck from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport React from 'react';\nimport JsUtil from 'tsx/common/JsUtil';\nimport cnst from 'tsx/common/Constant';\nimport URI from 'tsx/common/URI';\nimport HeadLayout from 'tsx/layout/HeadLayout';\nimport RowLayout from 'tsx/layout/RowLayout';\nimport CardLayout from 'tsx/layout/CardLayout';\nimport BrView from 'tsx/view/BrView';\nimport TextLabel from 'tsx/view/TextLabel';\nimport GeneralInput from 'tsx/form/GeneralInput';\nimport GeneralButton from 'tsx/form/GeneralButton';\nimport HomeImage from 'img/p/setting.png';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Login = /*#__PURE__*/function (_React$Component) {\n  function Login(props) {\n    var _this;\n    _classCallCheck(this, Login);\n    _this = _callSuper(this, Login, [props]);\n    _defineProperty(_this, \"onInputChanged\", function (name, value) {\n      _this.setState(_defineProperty({}, name, value));\n    });\n    _defineProperty(_this, \"onLogin\", function () {\n      var loginName = _this.state.loginName;\n      if (!loginName) {\n        JsUtil.showMsgBox(_this, '登录名不能为空');\n        return;\n      }\n      var password = _this.state.password;\n      if (!password) {\n        JsUtil.showMsgBox(_this, '密码不能为空');\n        return;\n      }\n      var weId = JsUtil.getAppItem('weId');\n      var param = 'loginName=' + _this.state.loginName + '&password=' + _this.state.password + '&clientVersion=1.0.0';\n      if (process.env.TARO_ENV === cnst.TARO_ENV_WEAPP) {\n        if (!weId) {\n          //JsUtil.showMsgBox(this, '找不到微信编号，请重新打开小程序')\n          //return\n        }\n        param = param + '&weId=' + weId;\n      }\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result)) {\n          var userInfo = result.body;\n          JsUtil.setAppItem(\"currUserId\", userInfo.id);\n          JsUtil.setAppItem(\"currOrgId\", userInfo.orgId);\n          JsUtil.setAppItem(\"currOrgName\", userInfo.orgName);\n          JsUtil.setAppItem(\"currOrgType\", userInfo.orgType);\n          JsUtil.setAppItem('receiptMemId', userInfo.receiptMemId);\n          JsUtil.setAppItem('receiptOrgId', userInfo.receiptOrgId);\n          JsUtil.setAppItem(\"token\", userInfo.token);\n          JsUtil.setAppItem(\"authorities\", userInfo.authorities);\n          JsUtil.setAppItem(\"storeNames\", userInfo.storeNames);\n          JsUtil.setAppItem(\"currUserName\", userInfo.nickName);\n          JsUtil.setAppItem('avatarUrl', userInfo.avatar);\n          //this.loadCommodityFollow(userInfo.id);\n          //this.loadSupplierFollow(userInfo.id);\n          if (_this.params.path) JsUtil.go2Page('/' + _this.params.path);else JsUtil.goHome();\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result, true);\n      };\n      JsUtil.asyncHttpPost(_this, '/sec/login?' + param, null, succ, err, cnst.REQUEST_TYPE_WWW);\n    });\n    _defineProperty(_this, \"go2Register\", function () {\n      JsUtil.go2Page(URI.MEMBER_REGISTER);\n    });\n    _defineProperty(_this, \"onConfirm\", function () {\n      JsUtil.closeMsgBox(_this);\n    });\n    _this.params = JsUtil.getUrlParams(_this);\n    _this.state = {\n      loginName: '',\n      password: '',\n      messages: _this.props.message ? {\n        isOpened: true,\n        content: _this.props.message,\n        confirmText: '确定',\n        onConfirm: _this.onConfirm\n      } : {}\n    };\n    return _this;\n  }\n  _inherits(Login, _React$Component);\n  return _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_jsx(HeadLayout, {\n        that: this,\n        topNavBarTitle: \"\\u767B\\u5F55\",\n        children: /*#__PURE__*/_jsxs(CardLayout, {\n          title: '登录',\n          thumb: HomeImage,\n          children: [/*#__PURE__*/_jsx(BrView, {\n            height: 16,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), /*#__PURE__*/_jsx(GeneralInput, {\n            type: \"text\",\n            name: \"loginName\",\n            label: \"\\u767B\\u5F55\\u540D\",\n            value: this.state.loginName,\n            onChange: this.onInputChanged\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: 16,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), /*#__PURE__*/_jsx(GeneralInput, {\n            type: \"text\",\n            name: \"password\",\n            label: \"\\u5BC6\\u7801\",\n            value: this.state.password,\n            onChange: this.onInputChanged,\n            password: true\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: 32,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), /*#__PURE__*/_jsx(GeneralButton, {\n            width: 90,\n            onClick: this.onLogin,\n            children: \"\\u767B\\u5F55\"\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: 64,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), /*#__PURE__*/_jsxs(RowLayout, {\n            justifyContent: \"flex-end\",\n            children: [/*#__PURE__*/_jsx(TextLabel, {\n              justifyContent: \"flex-end\",\n              children: \"\\u6CA1\\u6709\\u5E10\\u53F7\\uFF0C\"\n            }), /*#__PURE__*/_jsx(GeneralButton, {\n              type: \"primary\",\n              size: 'default',\n              onClick: this.go2Register,\n              children: \"\\u53BB\\u6CE8\\u518C\"\n            })]\n          })]\n        })\n      });\n    }\n  }]);\n}(React.Component);\nexport default Login;","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pkgsubject/page/member/Login!./Login.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pkgsubject/page/member/Login', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}