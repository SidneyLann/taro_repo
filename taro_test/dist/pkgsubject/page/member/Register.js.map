{"version":3,"file":"pkgsubject/page/member/Register.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3PA;AACA;AACA;AACA;AAAA;AAGA;AAKA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAGA;AAAA;AAAA;AAGA;;;;;;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://i_bizz_client/./src/pkgsubject/page/member/Register.tsx?4cc9","webpack://i_bizz_client/._src_form_UploadButton.tsx","webpack://i_bizz_client/._src_pkgsubject_page_member_Register.tsx"],"sourcesContent":["import _classCallCheck from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport React from 'react';\nimport JsUtil from 'tsx/common/JsUtil';\nimport cnst from 'tsx/common/Constant';\nimport URI from 'tsx/common/URI';\nimport HeadLayout from 'tsx/layout/HeadLayout';\nimport RowLayout from 'tsx/layout/RowLayout';\nimport CardLayout from 'tsx/layout/CardLayout';\nimport BrView from 'tsx/view/BrView';\nimport GeneralInput from 'tsx/form/GeneralInput';\nimport GeneralButton from 'tsx/form/GeneralButton';\nimport UploadButton from 'tsx/form/UploadButton';\nimport SimpleIcon from 'tsx/view/SimpleIcon';\nimport HomeImage from 'img/p/setting.png';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Register = /*#__PURE__*/function (_React$Component) {\n  function Register(props) {\n    var _this;\n    _classCallCheck(this, Register);\n    _this = _callSuper(this, Register, [props]);\n    _defineProperty(_this, \"labels0\", {\n      avatar: '头像',\n      nickName: '昵称',\n      loginName: '登录名称',\n      password: '密码'\n    });\n    _defineProperty(_this, \"register\", function (uri) {\n      var loginName = _this.state.loginName;\n      var password = _this.state.password;\n      var wxNickName = _this.state.wxNickName;\n      var wxAvatar = _this.state.wxAvatar;\n      var weId = JsUtil.getAppItem('weId');\n      if (process.env.TARO_ENV == cnst.TARO_ENV_WEAPP) {\n        if (!weId) {\n          JsUtil.showMsgBox(_this, '微信编号不能为空, 请重新打开如下微信小程序：柏君商城');\n          return;\n        }\n        if (!wxAvatar) {\n          JsUtil.showMsgBox(_this, '头像不能为空');\n          return;\n        }\n        if (!wxNickName) {\n          JsUtil.showMsgBox(_this, '昵称不能为空');\n          return;\n        }\n      }\n      if (!loginName) {\n        JsUtil.showMsgBox(_this, '登录名不能为空');\n        return;\n      }\n      if (!password) {\n        JsUtil.showMsgBox(_this, '密码不能为空');\n        return;\n      } else if (password.length < 8 || password.length > 20) {\n        JsUtil.showMsgBox(_this, '密码长度应在8到20之间');\n        return;\n      }\n      var param = {\n        loginName: loginName,\n        password: password,\n        weId: weId,\n        wxNickName: wxNickName,\n        wxAvatar: wxAvatar\n      };\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this, result, true)) {\n          JsUtil.sleep(3000).then(function () {\n            JsUtil.closeMsgBox(_this);\n            JsUtil.go2Page(URI.MEMBER_LOGIN);\n          });\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result);\n      };\n      console.log(wxNickName);\n      JsUtil.asyncHttpPost(_this, uri, JSON.stringify(param), succ, err);\n    });\n    _defineProperty(_this, \"onRegister\", function () {\n      _this.register('/mb/pub/2/create');\n    });\n    _defineProperty(_this, \"onAssociate\", function () {\n      _this.register('/mb/pub/wechat/associate/2/update');\n    });\n    _defineProperty(_this, \"onInputChanged\", function (name, value) {\n      _this.setState(_defineProperty({}, name, value));\n    });\n    _defineProperty(_this, \"onInputNickName\", function (event) {\n      var value = event.detail.value;\n      _this.setState({\n        wxNickName: value\n      });\n    });\n    _defineProperty(_this, \"setWxAvatar\", function (event) {\n      var avatarUrl = event.detail.avatarUrl;\n      var file = {};\n      file.path = avatarUrl;\n      file.fileCategory = cnst.BIZZ_CAT_NOAUTH;\n      file.targetUri = '/rs/pub/file/upload/2/create';\n      var succ = function succ(result) {\n        if (result.statusCode) result = JSON.parse(result.data);\n        if (JsUtil.handleMessage(_this, result)) {\n          _this.setState({\n            wxAvatar: result.body\n          });\n        }\n      };\n      JsUtil.uploadSingleFile(_this, file, succ);\n    });\n    _defineProperty(_this, \"cancelDialog\", function () {\n      _this.setState({\n        open: false\n      });\n    });\n    _defineProperty(_this, \"confirmDialog\", function () {});\n    _defineProperty(_this, \"onConfirm\", function () {\n      JsUtil.closeMsgBox(_this);\n    });\n    _this.state = {\n      loginName: '',\n      password: '',\n      wxNickName: '',\n      wxAvatar: '',\n      open: false,\n      backgroundImage: 'data:image/jpg;base64,',\n      cutoutImage: 'data:image/jpg;base64,',\n      serialNo: '',\n      topLeftY: 0,\n      topLeftX: 0,\n      timeLeft: 0,\n      buttonText: \"获取验证码\",\n      buttonDisabled: false,\n      messages: {}\n    };\n    return _this;\n  }\n  _inherits(Register, _React$Component);\n  return _createClass(Register, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"onCutoutPositionMatch\",\n    value: function onCutoutPositionMatch() {\n      var that = this;\n      setTimeout(function () {\n        that.setState({\n          open: false,\n          timeLeft: 120,\n          buttonDisabled: true\n        });\n      }, 500);\n      var downloadTimer = setInterval(function () {\n        var text = \"(\" + that.state.timeLeft + \")\";\n        var nextTimeleft = that.state.timeLeft - 1;\n        that.setState({\n          buttonText: text,\n          timeLeft: nextTimeleft\n        });\n        if (that.state.timeLeft < 0) {\n          clearInterval(downloadTimer);\n          that.setState({\n            timeLeft: 0,\n            buttonDisabled: false,\n            buttonText: \"获取验证码\"\n          });\n        }\n      }, 1000);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var ui4NickNameAndAvatar = [/*#__PURE__*/_jsx(BrView, {\n        height: 16,\n        backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n      }), /*#__PURE__*/_jsxs(RowLayout, {\n        justifyContent: \"flex-start\",\n        children: [/*#__PURE__*/_jsx(UploadButton, {\n          openType: \"chooseAvatar\",\n          onChooseAvatar: this.setWxAvatar,\n          type: \"secondary\",\n          size: \"mini\",\n          children: \"\\u9009\\u62E9\\u5934\\u50CF\"\n        }), /*#__PURE__*/_jsx(SimpleIcon, {\n          value: JsUtil.IMAGE_PREFIX + this.state.wxAvatar\n        })]\n      }), /*#__PURE__*/_jsx(BrView, {\n        height: 16,\n        backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n      }), /*#__PURE__*/_jsx(GeneralInput, {\n        type: \"nickname\",\n        name: \"wxNickName\",\n        label: \"\\u6635\\u79F0\",\n        value: this.state.wxNickName,\n        onChange: this.onInputChanged,\n        bindblur: this.onInputChanged\n      })];\n      var ui4Association = [/*#__PURE__*/_jsx(BrView, {\n        height: 32,\n        backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n      }), /*#__PURE__*/_jsx(GeneralButton, {\n        type: \"primary\",\n        size: \"mini\",\n        onClick: this.onAssociate,\n        children: \"\\u5173\\u8054\\u5DF2\\u6709\\u5E10\\u53F7\"\n      })];\n      return /*#__PURE__*/_jsxs(HeadLayout, {\n        that: this,\n        topNavBarTitle: \"\\u6CE8\\u518C\",\n        children: [/*#__PURE__*/_jsxs(CardLayout, {\n          title: '注册',\n          thumb: HomeImage,\n          children: [ui4NickNameAndAvatar, /*#__PURE__*/_jsx(BrView, {\n            height: 16,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), /*#__PURE__*/_jsx(GeneralInput, {\n            type: \"text\",\n            name: \"loginName\",\n            label: \"\\u767B\\u5F55\\u540D\",\n            value: this.state.loginName,\n            onChange: this.onInputChanged\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: 16,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), /*#__PURE__*/_jsx(GeneralInput, {\n            type: \"text\",\n            name: \"password\",\n            label: \"\\u5BC6\\u7801\",\n            value: this.state.password,\n            onChange: this.onInputChanged,\n            password: true\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: 64,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), /*#__PURE__*/_jsx(GeneralButton, {\n            type: \"primary\",\n            size: \"mini\",\n            onClick: this.onRegister,\n            children: \"\\u6CE8\\u518C\\u65B0\\u8D26\\u53F7\"\n          }), process.env.TARO_ENV == cnst.TARO_ENV_WEAPP && ui4Association]\n        }), /*#__PURE__*/_jsx(BrView, {\n          height: 106,\n          backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n        })]\n      });\n    }\n  }]);\n}(React.Component);\nexport default Register;","import React from 'react'\r\nimport { styled } from '@linaria/react'\r\nimport { Button } from '@tarojs/components'\r\nimport JsUtil from 'tsx/common/JsUtil'\r\nimport TextLabel from 'tsx/view/TextLabel';\r\n\r\nconst Button0 = styled(Button) <{ left: string, bottom: string,  top: string, right: string, justifyContent: string,  alignItems: string, alignSelf: string, \r\nwidth: string, height: string, backgroundColor: string }>`\r\ndisplay: flex;\r\nflex-direction: row;\r\nposition: relative;\r\njustify-content: ${props => props.justifyContent};\r\nalign-items: ${props => props.alignItems};\r\nalign-self: ${props => props.alignSelf};\r\nwidth: ${props => props.width};\r\nheight: ${props => props.height};\r\nbackground-color: ${props => props.backgroundColor};\r\n`\r\n\r\nclass UploadButton extends React.Component {\r\n  render() {\r\n    const left = JsUtil.getCssWidthValue( this.props.left, 0);\r\n    const bottom = JsUtil.getCssHeightValue(this.props.bottom, 0);\r\n    const top = JsUtil.getCssHeightValue( this.props.top, 0);\r\n    const right = JsUtil.getCssWidthValue( this.props.right, 0);\r\n      \r\n    const justifyContent = JsUtil.getCssStrValue( this.props.justifyContent, 'flex-start');\r\n    const alignItems = JsUtil.getCssStrValue( this.props.alignItems, 'flex-start');\r\n    const alignSelf = JsUtil.getCssStrValue( this.props.alignSelf, 'flex-start');\r\n    \r\n    const width = JsUtil.getCssWidthValue(this.props.width, 'auto');\r\n    const height = JsUtil.getCssHeightValue(this.props.height, 'auto');\r\n\r\n    const marginTop = JsUtil.getCssHeightValue(this.props.marginTop, 0);\r\n    const marginBottom = JsUtil.getCssHeightValue(this.props.marginBottom, 0);\r\n\r\n    const backgroundColor = JsUtil.getColorValue( this.props.backgroundColor);\r\n    \r\n    const type = this.props.type? this.props.type: 'primary'\r\n    const size = this.props.size? this.props.size: 'mini'\r\n    \r\n    const plain  = this.props.plain? true: false;\r\n    const disabled  = this.props.disabled? true: false;\r\n    \r\n    let paddingLeft = 3;\r\n    if(process.env.TARO_ENV === 'h5') paddingLeft = 0;\r\n\r\n    return (\r\n       <Button \r\n        type={type}  size={size} openType={this.props.openType} onChooseAvatar={this.props.onChooseAvatar} disabled={disabled} \r\n        backgroundColor={backgroundColor} \r\n        onClick={this.props.onClick} \r\n        style={{display: 'flex', flexDirection: 'row', alignSelf: 'flex-start', width: width, height: height, fontSize: 10, marginTop: 0, marginLeft: 0, paddingLeft: paddingLeft, paddingRight: 0,paddingTop: 0}}\r\n       >\r\n        {this.props.children}\r\n       </Button>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UploadButton\r\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pkgsubject/page/member/Register!./Register.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pkgsubject/page/member/Register', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}