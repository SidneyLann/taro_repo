{"version":3,"file":"page/mall/Mall.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://i_bizz_client/./src/page/mall/Mall.tsx?8aaf","webpack://i_bizz_client/._src_page_mall_Mall.tsx"],"sourcesContent":["import _objectSpread from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"c:/taro/i_bizz_client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport React from 'react';\nimport JsUtil from 'tsx/common/JsUtil';\nimport cnst from 'tsx/common/Constant';\nimport URI from 'tsx/common/URI';\nimport HeadLayout from 'tsx/layout/HeadLayout';\nimport RowLayout from 'tsx/layout/RowLayout';\nimport CardLayout from 'tsx/layout/CardLayout';\nimport BaseView from 'tsx/view/BaseView';\nimport BrView from 'tsx/view/BrView';\nimport TextLabel from 'tsx/view/TextLabel';\nimport GeneralButton from 'tsx/form/GeneralButton';\nimport SelectInput from 'tsx/form/SelectInput';\nimport MallImage from 'img/p/mall_selected.png';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Mall = /*#__PURE__*/function (_React$Component) {\n  function Mall(props) {\n    var _this;\n    _classCallCheck(this, Mall);\n    _this = _callSuper(this, Mall, [props]);\n    _defineProperty(_this, \"change2b2c\", function () {\n      _this.setState({\n        isB2C: !_this.state.isB2C\n      });\n      var currMallType = JsUtil.getAppItem('currMallType');\n      if (currMallType == cnst.MALL_TYPE_G_B2B) {\n        JsUtil.setAppItem('currMallType', cnst.MALL_TYPE_G_B2C);\n      } else if (currMallType == cnst.MALL_TYPE_G_B2C) {\n        JsUtil.setAppItem('currMallType', cnst.MALL_TYPE_G_B2B);\n      } else if (currMallType == cnst.MALL_TYPE_R_B2B) {\n        JsUtil.setAppItem('currMallType', cnst.MALL_TYPE_R_B2C);\n      } else if (currMallType == cnst.MALL_TYPE_R_B2C) {\n        JsUtil.setAppItem('currMallType', cnst.MALL_TYPE_R_B2B);\n      }\n    });\n    _defineProperty(_this, \"changeGlobleRegion\", function () {\n      _this.setState({\n        isGlobal: !_this.state.isGlobal\n      }, function () {\n        return _this.setMallType();\n      });\n    });\n    _defineProperty(_this, \"setMallType\", function () {\n      var isB2C = _this.state.isB2C;\n      var isGlobal = _this.state.isGlobal;\n      if (isGlobal) {\n        if (isB2C) {\n          JsUtil.setAppItem('currMallType', cnst.MALL_TYPE_G_B2C);\n        } else {\n          JsUtil.setAppItem('currMallType', cnst.MALL_TYPE_G_B2B);\n        }\n        JsUtil.setAppItem('currOperatorId', cnst.ID_HQ);\n        JsUtil.setAppItem('currOperatorName', cnst.NAME_HQ);\n      } else {\n        if (isB2C) {\n          JsUtil.setAppItem('currMallType', cnst.MALL_TYPE_R_B2C);\n        } else {\n          JsUtil.setAppItem('currMallType', cnst.MALL_TYPE_R_B2B);\n        }\n        var lastProvinceId = JsUtil.getAppItem('lastProvinceId');\n        if (lastProvinceId) _this.provinceChanged({\n          id: lastProvinceId\n        });\n      }\n    });\n    _defineProperty(_this, \"provinceChanged\", function (item) {\n      var provinceId = item.id;\n      var lastOperatorId = JsUtil.getAppItem('lastOperatorId');\n      JsUtil.setAppItem('lastProvinceId', provinceId);\n      var succ = function succ(result) {\n        var cityOptions = result.body;\n        var operator = cityOptions.find(function (e) {\n          return e.third == lastOperatorId;\n        });\n        if (operator) _this.setState({\n          provinceId: provinceId,\n          cityOptions: cityOptions\n        }, function () {\n          return _this.cityChanged(_objectSpread({}, operator));\n        });else _this.setState({\n          provinceId: provinceId,\n          cityOptions: cityOptions\n        });\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this, result);\n      };\n      JsUtil.asyncHttpGet(_this, \"/lg/pub/region/op/pub/city/search?firstLevelId=\".concat(provinceId), succ, err);\n    });\n    _defineProperty(_this, \"cityChanged\", function (item) {\n      var id = item.third;\n      var opInfo = _this.state.cityOptions.find(function (option) {\n        return option.third == id;\n      });\n      if (!opInfo.first) return;\n      _this.setState({\n        operatorId: id\n      });\n      JsUtil.setAppItem('currOperatorId', opInfo.third);\n      JsUtil.setAppItem('currOperatorName', opInfo.second);\n      JsUtil.setAppItem('lastOperatorId', opInfo.third);\n      var currMallType = JsUtil.getAppItem('currMallType');\n      if (currMallType == cnst.MALL_TYPE_G_B2B) {\n        JsUtil.setAppItem('currMallType', cnst.MALL_TYPE_R_B2B);\n      } else if (currMallType == cnst.MALL_TYPE_G_B2C) {\n        JsUtil.setAppItem('currMallType', cnst.MALL_TYPE_R_B2C);\n      }\n    });\n    _defineProperty(_this, \"openChatting\", function () {\n      var orgId = JsUtil.getAppItem('currOperatorId');\n      var orgName = JsUtil.getAppItem('currOperatorName');\n      var mallType = JsUtil.getAppItem('currMallType');\n      JsUtil.go2Page(URI.MALL_CHATTING + '?directType=1' + '&mallType=' + mallType + '&orgId=' + orgId + '&orgName=' + orgName);\n    });\n    _defineProperty(_this, \"onConfirm\", function () {\n      JsUtil.closeMsgBox(_this);\n    });\n    var _currMallType = JsUtil.getAppItem('currMallType');\n    _this.state = {\n      isB2C: _currMallType == cnst.MALL_TYPE_G_B2C || _currMallType == cnst.MALL_TYPE_R_B2C ? true : false,\n      isGlobal: _currMallType == cnst.MALL_TYPE_R_B2B || _currMallType == cnst.MALL_TYPE_R_B2C ? false : true,\n      provinceId: -1,\n      operatorId: -1,\n      provinceOptions: [],\n      cityOptions: [],\n      messages: {}\n    };\n    return _this;\n  }\n  _inherits(Mall, _React$Component);\n  return _createClass(Mall, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var lastProvinceId = JsUtil.getAppItem('lastProvinceId');\n      var param = {\n        parentId: cnst.ID_TOP_REGION\n      };\n      var succ = function succ(result) {\n        if (JsUtil.handleMessage(_this2, result)) {\n          var provinceOptions = result.body;\n          if (lastProvinceId) _this2.setState({\n            provinceOptions: provinceOptions,\n            provinceId: lastProvinceId\n          }, function () {\n            return _this2.provinceChanged({\n              id: lastProvinceId\n            });\n          });else _this2.setState({\n            provinceOptions: provinceOptions\n          });\n        }\n      };\n      var err = function err(result) {\n        JsUtil.handleMessage(_this2, result, true);\n      };\n      JsUtil.asyncHttpPost(this, '/lg/pub/region/search', JSON.stringify(param), succ, err);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n        provinceOptions = _this$state.provinceOptions,\n        cityOptions = _this$state.cityOptions,\n        provinceId = _this$state.provinceId,\n        operatorId = _this$state.operatorId;\n      var labelKey1 = 'regionFullName';\n      var labelKey2 = 'second';\n      var valueKey1 = 'id';\n      var valueKey2 = 'third';\n      var label2Bor2C = 'b2b商城';\n      if (this.state.isB2C) {\n        label2Bor2C = 'b2c商城';\n      }\n      var labelGlobalorRegion = '地方商城';\n      if (this.state.isGlobal) {\n        labelGlobalorRegion = '全国商城';\n      }\n      var labelWidth = -18;\n      var valueWidth = -76;\n      return /*#__PURE__*/_jsx(HeadLayout, {\n        that: this,\n        children: /*#__PURE__*/_jsxs(CardLayout, {\n          title: \"\\u5546\\u57CE\\u5207\\u6362\",\n          thumb: MallImage,\n          width: cnst.NUM_WIDTH_MAIN,\n          height: -90,\n          children: [/*#__PURE__*/_jsx(BrView, {\n            width: cnst.NUM_WIDTH_MAIN,\n            height: 20,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), /*#__PURE__*/_jsxs(RowLayout, {\n            alignSelf: \"flex-start\",\n            children: [/*#__PURE__*/_jsx(TextLabel, {\n              children: \"\\u6279\\u53D1\\u96F6\\u552E\"\n            }), /*#__PURE__*/_jsx(GeneralButton, {\n              type: \"primary\",\n              size: \"mini\",\n              width: 68,\n              onClick: this.change2b2c,\n              children: label2Bor2C\n            })]\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: 20,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), /*#__PURE__*/_jsxs(RowLayout, {\n            alignSelf: \"flex-start\",\n            children: [/*#__PURE__*/_jsx(TextLabel, {\n              children: \"\\u5730\\u65B9\\u5168\\u56FD\"\n            }), /*#__PURE__*/_jsx(GeneralButton, {\n              type: \"primary\",\n              size: \"mini\",\n              width: 68,\n              onClick: this.changeGlobleRegion,\n              children: labelGlobalorRegion\n            })]\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: cnst.NUM_HEIGHT_LINE,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), !this.state.isGlobal && /*#__PURE__*/_jsxs(BaseView, {\n            alignSelf: \"flex-start\",\n            children: [/*#__PURE__*/_jsx(SelectInput, {\n              options: provinceOptions,\n              labelKey: labelKey1,\n              valueKey: valueKey1,\n              value: provinceId,\n              onChange: this.provinceChanged,\n              label: '省(市)',\n              labelWidth: labelWidth,\n              valueWidth: valueWidth\n            }), /*#__PURE__*/_jsx(SelectInput, {\n              options: cityOptions,\n              labelKey: labelKey2,\n              valueKey: valueKey2,\n              value: operatorId,\n              onChange: this.cityChanged,\n              label: '市(州)',\n              labelWidth: labelWidth,\n              valueWidth: valueWidth\n            })]\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: 100,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: 20,\n            backgroundColor: cnst.COLOR_BACKGROUND_NEAR_WHITE\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: 150,\n            backgroundColor: cnst.COLOR_BACKGROUND_TRANS_WHITE\n          }), /*#__PURE__*/_jsx(GeneralButton, {\n            type: \"primary\",\n            size: \"mini\",\n            width: 68,\n            onClick: this.openChatting,\n            children: '商城客服'\n          }), /*#__PURE__*/_jsx(BrView, {\n            height: 150,\n            backgroundColor: cnst.COLOR_BACKGROUND_WHITE\n          })]\n        })\n      });\n    }\n  }]);\n}(React.Component);\nexport default Mall;","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=page/mall/Mall!./Mall.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'page/mall/Mall', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}